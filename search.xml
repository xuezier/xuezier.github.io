<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[egg.js æ‰“é€ é«˜å¯ç”¨æœåŠ¡é›†ç¾¤]]></title>
    <url>%2F2019%2F10%2F24%2Fegg-%E6%89%93%E9%80%A0%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4%2F</url>
    <content type="text"><![CDATA[å‰è¨€Q4 äº†ï¼Œç§‹é«˜æ°”çˆ½é€‚åˆå…»ç”Ÿã€‚æ¯å¤©æ˜æ˜æ¬²ç¡çš„æˆ‘ï¼Œä»Šæ™šçªç„¶è¡€æ°”ä¸Šæ¶Œï¼Œåˆæ¥æ»¥ç«½å……æ•°å‘è¡¨ yy æ–‡äº†ðŸ˜ã€‚ ä»Šæ—¥ä»½ä¸»é¢˜ï¼šé«˜å¯ç”¨æœåŠ¡ï¼ ä»¥ä¸‹æœåŠ¡æ¡ˆä¾‹æ˜¯ä»¥ egg.js ä¸ºåŸºç¡€æ­å»ºã€‚ ç†è§£é«˜å¯ç”¨æœåŠ¡é«˜å¯ç”¨ä¹Ÿå°±æ˜¯å¤§å®¶å¸¸è¯´çš„HAï¼ˆHigh Availabilityï¼‰ï¼Œé«˜å¯ç”¨çš„å¼•å…¥ï¼Œæ˜¯é€šè¿‡è®¾è®¡å‡å°‘ç³»ç»Ÿä¸èƒ½æä¾›æœåŠ¡çš„æ—¶é—´ï¼Œè€Œä¸èƒ½ä¿è¯ç³»è°¢ç»Ÿå¯ç”¨æ€§æ˜¯èƒ½è¾¾åˆ°100%çš„ï¼ ä¸èƒ½ä¿è¯ç³»ç»Ÿå¯ç”¨æ€§æ˜¯èƒ½è¾¾åˆ°100%çš„ï¼ ä¸èƒ½ä¿è¯ç³»ç»Ÿå¯ç”¨æ€§æ˜¯èƒ½è¾¾åˆ°100%çš„ï¼ ä¸èƒ½ä¿è¯ç³»ç»Ÿå¯ç”¨æ€§æ˜¯èƒ½è¾¾åˆ°100%çš„ï¼ èƒŒæ™¯ç›®å‰æˆ‘ä»¬å…¬å¸çš„æœåŠ¡éƒ¨ç½²ä¸»è¦åˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¼ ç»Ÿçš„å¤š ecs æœåŠ¡å™¨åˆ†å¸ƒå¼é›†ç¾¤ï¼Œä¸€ç§æ˜¯ k8s æ‰˜ç®¡é›†ç¾¤æœåŠ¡ã€‚ é¢˜ä¸»è´Ÿè´£çš„æœåŠ¡å¤§å¤šæ˜¯ä»¥ ecs éƒ¨ç½²ä¸ºä¸»ðŸ’»ï¼Œå†…å®¹å±•å¼€ä¹Ÿæ˜¯ä»¥æ­¤ä¸ºåŸºç¡€ã€‚ å…ˆçœ‹ä¸€ç»„å›¾ é«˜å¯ç”¨çš„å‡†åˆ™åŸºæœ¬ä¸Šä¿è¯æœåŠ¡çš„é«˜å¯ç”¨éµå¾ªä¸¤ä¸ªåŽŸåˆ™ é›†ç¾¤åŒ– æ•…éšœè‡ªåŠ¨åŒ–å¤„ç† é›†ç¾¤åŒ–ä¸»è¦è¿˜æ˜¯åˆ†ä¸¤ç±» å•æœºè¿›ç¨‹é›†ç¾¤ å¤šæœºé›†ç¾¤ é›†ç¾¤åŒ–çš„éƒ¨ç½²æœ¬èº«ä¹Ÿæ˜¯ä¸ºäº†è§„é¿å•ç‚¹ï¼ˆå•è¿›ç¨‹ã€å•æœºï¼‰æ•…éšœå¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨çš„é—®é¢˜ã€‚å½“é›†ç¾¤ä¸­æŸä¸ªæœåŠ¡/è¿›ç¨‹æŒ‚æŽ‰çš„æ—¶å€™ï¼Œè¯¥å•ç‚¹æ‰€æ‰¿è½½çš„æµé‡ä¼šè¢«å…¶ä»–æœåŠ¡/è¿›ç¨‹åˆ†æ‹…ã€‚ å•æœºè¿›ç¨‹é›†ç¾¤å•æœºè¿›è¡Œå¤šè¿›ç¨‹é›†ç¾¤çš„éƒ¨ç½²ï¼Œå½“é›†ç¾¤ä¸­çš„æŸä¸€ä¸ªè¿›ç¨‹æŒ‚æŽ‰çš„æ—¶å€™ï¼Œåº”è¯¥æ„ŸçŸ¥è¯¥è¿›ç¨‹çš„æ•…éšœï¼ŒåŠæ—¶å°†è¿›ç¨‹è¿›è¡Œæ¸…ç†ï¼Œæµé‡å‡æ‘Šåˆ°å…¶ä»–è¿›ç¨‹ï¼Œç›´åˆ°æ•…éšœè¿›ç¨‹è¢«é‡æ–°æ‹‰èµ·ã€‚ é€šå¸¸æˆ‘ä»¬ä¸ºäº†åˆç†åˆ©ç”¨ cpu èµ„æºï¼Œä¼šæ ¹æ® cpu æ ¸å¿ƒçš„æ•°é‡å¯åŠ¨ç›¸åº”æ•°é‡çš„è¿›ç¨‹ï¼Œä½†åœ¨å•æ ¸æœºå™¨ä¸Šæ—¶ï¼Œcpu çš„æ ¸å¿ƒæ•°åªæœ‰ 1ï¼Œé’ˆå¯¹å•æ ¸æœºå™¨éœ€è¦åšç‰¹æ®Šå¤„ç†ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­å°†å¯åŠ¨å‘½ä»¤é€šè¿‡è„šæœ¬æ–‡ä»¶è¿›è¡ŒåŒ…è£…12345678910111213141516171819// scripts/start.jsconst os = require('os');const child_process = require('child_process');const cores = os.cpus().length;// å½“æ ¸å¿ƒæ•°åªæœ‰ 1 çš„æ—¶å€™ï¼Œå¯åŠ¨ä¸¤ä¸ª worker è¿›ç¨‹ï¼Œå…¶ä»–æƒ…å†µæ ¹æ® cpu æ ¸å¿ƒæ•°å¯åŠ¨ worker è¿›ç¨‹const workers = cores === 1 ? 2: cores;const command = 'npm';const argv = ['start', '--', `--workers=$&#123;worker&#125;`];const child = child_process.spawn(command, argv);child.stdout.on('data', (data) =&gt; &#123; console.log(`stdout: $&#123;data&#125;`);&#125;);child.stderr.on('data', (data) =&gt; &#123; console.error(`stderr: $&#123;data&#125;`);&#125;); æ•´ç†ä¸€ä¸‹ package.json çš„ scripts123456&#123; "scripts": &#123; "start": "eggctl start --daemon --title=egg-server-myProject", "scripts:start": "node scripts/start" &#125;&#125; è¿™æ ·å­å½“æˆ‘ä»¬é€šè¿‡æŒ‡ä»¤ npm run scripts:start æ¥å¯åŠ¨æœåŠ¡çš„æ—¶å€™ ï¼Œå¯ä»¥å…ˆèŽ·å–å½“å‰æœºå™¨çš„ cpu æ ¸å¿ƒæ•°é‡æ¥åˆç†å¯åŠ¨ç›¸åº”æ•°é‡çš„ worker è¿›ç¨‹ã€‚ å¤šæœºé›†ç¾¤å¤šæœºé›†ç¾¤çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å•æœºéƒ¨ç½²çš„ä¸€äº›ä¸å¯æŽ§å› ç´ å¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨çš„æƒ…å†µï¼Œæ¯”å¦‚æŸäº›æ„å¤–å¯¼è‡´çš„å®•æœºðŸ˜£ã€‚ã€‚ã€‚å¯ä»¥åŠæ—¶çš„å°†å®•æœºçš„æµé‡å‡æ‘Šåˆ°é›†ç¾¤ä¸­çš„å…¶ä»–æœºå™¨ä¸ŠåŽ»ã€‚ å¤šæœºé›†ç¾¤é€šå¸¸é€šè¿‡è´Ÿè½½å‡è¡¡è®©æ¯ä¸ªèŠ‚ç‚¹éƒ½åˆ†æ‹…è¯·æ±‚æµé‡ã€‚æ®æˆ‘äº†è§£åˆ°çš„é˜¿é‡Œ slb æœåŠ¡æ˜¯æ”¹é€ è¿‡çš„ nginx - Tengineã€‚åŽŸç†å’Œ nginx å®žçŽ°çš„è´Ÿè½½å‡è¡¡ç±»ä¼¼ï¼Œåªæ˜¯å®ƒæœ¬èº«å°±æ˜¯é«˜å¯ç”¨çš„æœåŠ¡ï¼Œæˆ‘ä»¬ä¸éœ€è¦åŽ»ç»´æŠ¤è¿™ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡ã€‚ èµ„æºå†—ä½™ä¸è¦ä¸ºäº†çœé’±è€Œé‡‡ç”¨å¤Ÿç”¨å°±å¥½çš„èµ„æºé…ç½®ðŸ’¥ã€‚å½“ä¸€å° 2c4g çš„æœºå™¨èƒ½å¤Ÿæ‰¿è½½ 200qps çš„æ—¶å€™ï¼Œéœ€è¦å¯¹æœºå™¨çš„ç¡¬ä»¶èµ„æºåšå†—ä½™ï¼Œæ¯”å¦‚å‡çº§æˆ 4c8gã€‚å¦åˆ™å½“æŸä¸ªèŠ‚ç‚¹çªç„¶è¯·æ±‚é‡ä¸Šå‡ï¼Œæˆ–ç³»ç»Ÿæœ¬èº«æœåŠ¡åœ¨åšä¸€äº›å¤„ç†æ¯”å¦‚æ—¥å¿—è½®è½¬çš„æ—¶å€™ï¼Œä¼šé€ æˆèµ„æºç«žäº‰ï¼Œå¯¼è‡´ä¸€äº›ä¸å¯æŽ§çš„é—®é¢˜ã€‚ å…³äºŽèµ„æºå†—ä½™çš„ç‚¹ï¼Œecs éƒ¨ç½²ç›¸å¯¹äºŽ k8s æ¥è¯´ï¼Œç¡®å®žæ˜¯å±žäºŽèµ„æºç¼–æŽ’ç›¸å¯¹æµªè´¹çš„çš„éƒ¨ç½²æ–¹å¼ã€‚ keepalivedåœ¨è´Ÿè½½å‡è¡¡(slb)ä¸­ï¼Œé€šè¿‡ å¥åº·æ£€æŸ¥ æ£€æµ‹æœåŠ¡å™¨çš„å·¥ä½œçŠ¶æ€ï¼Œå¦‚æžœè¯¥æœåŠ¡å™¨å‡ºçŽ°æ•…éšœè¢«æ£€æµ‹åˆ°ï¼Œå°†å…¶å‰”é™¤æœåŠ¡å™¨ç¾¤ï¼Œç›´è‡³æ­£å¸¸å·¥ä½œåŽï¼Œè‡ªåŠ¨æ£€æµ‹åˆ°å¹¶åŠ å…¥åˆ°æœåŠ¡å™¨ç¾¤é‡Œé¢ã€‚ é¢„å‘å¸ƒé€šå¸¸çš„æµ‹è¯•çŽ¯å¢ƒä¸Žçº¿ä¸ŠçŽ¯å¢ƒå­˜åœ¨ä¸€äº›å·®å¼‚ï¼Œå¯èƒ½ä¼šè§„é¿æŽ‰ä¸€äº›ä¸Šçº¿éƒ¨ç½²çš„é£Žé™©ðŸ˜¨ã€‚ðŸ˜–ä¸ºäº†èƒ½ä¿è¯ä»£ç ä¸Šçº¿èƒ½æ­£å¸¸å¯åŠ¨æœåŠ¡ï¼Œåº”è¯¥é¢„ç•™ä¸€ä¸ªä¸Žçº¿ä¸Šå‡ ä¹Žä¸€è‡´çš„å†…éƒ¨çŽ¯å¢ƒï¼ˆç½‘ç»œï¼Œä¾èµ–ï¼Œé…ç½®ä¿¡æ¯ç­‰ï¼‰- æˆ‘ä»¬å§‘ä¸”ç§°ä¹‹ä¸ºé¢„å‘æœºå™¨ï¼Œå…ˆè¿›è¡Œä»£ç çš„é¢„å‘å¸ƒæµç¨‹ã€‚å½“æœåŠ¡åœ¨é¢„å‘æœºå™¨èƒ½æ­£å¸¸å·¥ä½œåŽï¼Œæ‰å°†ä»£ç å¾€çº¿ä¸Šå‘å¸ƒã€‚ ç‰ˆæœ¬è¿­ä»£çš„å¹³æ»‘äº’è”ç½‘æ—¶ä»£çš„å‘å±•æ˜¯è¿…é€Ÿçš„ï¼Œéœ€æ±‚æ¯å¤©éƒ½åœ¨å˜åŒ–ã€‚æ–°çš„éœ€æ±‚æ¯å¤©éƒ½åœ¨äº§ç”ŸðŸ”ªï¼ŒæœåŠ¡æœ¬èº«ä¸ä¼šä¿æŒä¸€æˆä¸å˜ã€‚æˆ‘ä»¬æ¯å¤©éƒ½æœ‰å¤§é‡çš„éœ€æ±‚æ›´æ–°å’Œ bugðŸ˜£ fix ä¸Šçº¿ã€‚ ä¿è¯ä»£ç å‘å¸ƒçš„å¹³æ»‘ï¼Œæ˜¯é«˜å¯ç”¨ä¸­ä¸å¯ç¼ºå°‘çš„ä¸€çŽ¯ï¼Œå¯¹äºŽ egg.js æœåŠ¡é›†ç¾¤å¦‚ä½•åšå¹³æ»‘é‡å¯ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å‘è¡¨çš„æ–‡ç« ðŸ˜ ã€ŠEgg.js å¤šæœºå¹³æ»‘é‡å¯å®žè·µã€‹ api è¿‡æ¸¡é€šå¸¸éšç€ç‰ˆæœ¬çš„é•¿æœŸè¿­ä»£ï¼Œæ—§çš„ api å¯èƒ½å·²ç»ä¸æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦å¯¹ api è¿›è¡Œå‡çº§ï¼Œè¿™ä¸ªæ—¶å€™æ–°æ—§ api æ˜¯ä¸å…¼å®¹çš„ðŸ¤”ã€‚ å½“æ–°æ—§ api è¿›è¡Œåˆ‡æ¢çš„æ—¶å€™ï¼Œä¼šäº§ç”ŸæŸäº›ä¸šåŠ¡è¿˜ä¾èµ–æ—§çš„ apiï¼Œå¦‚æžœç›´æŽ¥å°†æ—§çš„ api è¿›è¡Œæ”¹é€ ï¼Œå¾ˆå¯èƒ½å¯¹æŸäº›ä¸šåŠ¡å¸¦æ¥å½±å“ã€‚ å‡ºçŽ°è¿™ç§æƒ…å†µï¼Œä»Žæˆ‘ä»¬å¤„ç†çš„ç»éªŒä¸Šè®²ï¼Œæ–°çš„ api å·²ç»ä¸å…¼å®¹æ—§ç‰ˆæœ¬çš„ apiï¼Œé‚£ä¹ˆè¿˜æ˜¯ä¼šä¿ç•™æ—§çš„ api æŽ¥å£ï¼Œå¦å¤–è®¾è®¡ v2 ç‰ˆæœ¬çš„æ–° apiï¼Œä¿è¯æ–° api åœ¨ä¸Šçº¿çš„æ—¶å€™ï¼Œæ–°æ—§ api å…±å­˜ï¼Œç›´åˆ°ä¸šåŠ¡æ–¹æ”¹é€ å®Œæ¯•ï¼Œæ‰åºŸé™¤æ—§ç‰ˆæœ¬çš„ apiðŸ™‹ã€‚ æœåŠ¡é™çº§åœ¨çªå‘å¤§æµé‡çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´æœåŠ¡æ•´ä½“è´¨é‡ä¸‹æ»‘çš„æƒ…å†µã€‚è¿™æ—¶å€™å¯ä»¥åšæœåŠ¡é™çº§æ¥å…³é—­ä¸€äº›ä¸é‡è¦çš„æœåŠ¡æ¥é™ä½Žèµ„æºæ¶ˆè€—ã€‚ å¯¹äºŽæœåŠ¡é™çº§çš„æ–¹æ¡ˆï¼Œæˆ‘çš„è€ƒè™‘æ˜¯è¿™æ ·çš„ ç»Ÿä¸€çš„åˆ†å¸ƒå¼å¼€å…³ï¼Œç”±é…ç½®ä¸­å¿ƒï¼ˆå¦‚ apolloï¼‰ç®¡ç†ï¼› æœåŠ¡æŽ¥å…¥å¼€å…³ï¼Œå¹¶åœ¨ä¸€äº›éžå…³é”®éƒ¨ä½/æŽ¥å£ä¸Šå¼•å…¥å¼€å…³ã€‚æŽ¥å£æ–¹é¢å¯ä»¥é€šè¿‡ä¸­é—´ä»¶åšå¼€å…³ï¼› æ“ä½œé…ç½®ä¸­å¿ƒçš„å¼€å…³é¡¹ï¼Œå¯ä»¥åŠ¨æ€æŽ§åˆ¶å¼€å…³ï¼› æœåŠ¡è¢«é€šçŸ¥å¼€å…³å˜æ›´ï¼ŒåŠæ—¶ä¿®æ”¹å†…éƒ¨æŽ¥å£å¼€å…³ï¼› ç›‘æŽ§å‰çž»æ€§çš„ç›‘æŽ§é¢„è­¦æ˜¯å¯¹æœåŠ¡é«˜å¯ç”¨çš„ä¸€ä¸ªä¿éšœã€‚å¤šç»´åº¦çš„ç›‘æŽ§è­¦æŠ¥å¯ä»¥åœ¨æ•…éšœçš„ç¬¬ä¸€æ—¶é—´å°†é—®é¢˜æŠ›åˆ°ç›¸åº”çš„è´Ÿè´£äººæ‰‹ä¸Šå¤„ç†ðŸ›ã€‚ ç›‘æŽ§çš„æ–¹å¼æœ‰å¾ˆå¤šï¼ŒåŸºç¡€çš„ç›‘æŽ§æœ‰ä¾èµ–é˜¿é‡Œçš„äº‘ç›‘æŽ§ï¼Œrdsã€redisã€ecs ç­‰ç›‘æŽ§ã€‚ node ç›¸å…³æœåŠ¡å¯ä»¥ä½¿ç”¨ alinode åšä¸€äº›åº”ç”¨/ä¸»æœºçº§åˆ«çš„ç›‘æŽ§ã€‚ å¯é€‰çš„ä¸€äº›ç›‘æŽ§ä½“ç³»å¦‚ elk æ—¥å¿—ç›‘æŽ§ï¼Œsentryï¼Œopentracing æ…¢é“¾è·¯ç›‘æŽ§ç­‰ã€‚ æ€»ç»“æ€»ä¹‹ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨ï¼Œç®€å•çš„ä¸€å¥è¯å°±æ˜¯ä¸è¦æŠŠé¸¡è›‹éƒ½æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œï¼Œä¹Ÿä¸è¦è®©è‡­é¸¡è›‹ååœ¨ç¯®å­é‡Œã€‚ one more thingæœ€åŽï¼Œè¯¥æ¥çš„è¿˜æ˜¯è¦æ¥ðŸ˜ å¦‚æžœä½ ä¹Ÿå¯¹ eggjsï¼Œå¯¹ nodejsï¼Œå¯¹ js æœ‰å…´è¶£ï¼Œæœ‰æƒ³æŽ¢è®¨çš„é—®é¢˜ï¼Œå¯ä»¥è”ç³»æˆ‘çš„é‚®ç®±ðŸ“®tunan@gaoding.comã€‚ å¦‚æžœä½ å¯¹æˆ‘ä»¬çš„å·¥ä½œæ„Ÿå…´è¶£ï¼Œæƒ³å’Œæˆ‘ä»¬ä¸€èµ·æ”»å…‹éš¾å…³çš„è¯ï¼Œä¹Ÿå¯ä»¥ç›´æŽ¥å°†ç®€åŽ†å‘åˆ°æˆ‘çš„é‚®ç®±ã€‚ æˆ‘ä»¬æœ‰ä¸“èŒçš„ nodejs ç ”å‘å·¥ç¨‹å¸ˆï¼Œæœ‰åœ¨åŽ¦é—¨å…·æœ‰ç›¸å½“å½±å“åŠ›çš„å‰ç«¯å›¢é˜Ÿï¼Œç›¸ä¿¡å–œæ¬¢ js å–œæ¬¢ nodejs çš„ä½ ä¼šå–œæ¬¢æˆ‘ä»¬çš„å›¢é˜Ÿï½ž æˆ‘ä»¬æ˜¯ï¼šç¨¿å®šï¼ˆåŽ¦é—¨ï¼‰ç§‘æŠ€æœ‰é™å…¬å¸ - å¹³å°æŠ€æœ¯éƒ¨]]></content>
      <tags>
        <tag>node.js</tag>
        <tag>javascript</tag>
        <tag>egg.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[how to design a koa middleware]]></title>
    <url>%2F2019%2F10%2F15%2Fhow-to-design-a-koa-middleware%2F</url>
    <content type="text"><![CDATA[å‰è¨€è¯¥ä¸­é—´ä»¶è®¾è®¡è§„èŒƒæ˜¯æˆ‘ä»¬åœ¨å¹³æ—¶å·¥ä½œä¸­å®žè·µæ€»ç»“çš„ç»éªŒä¹‹è°ˆï¼Œæ¬¢è¿Žå°ä¼™ä¼´åæ§½æ”¹å–„ã€‚ Middlewareä¸­é—´ä»¶åœ¨ node.js çš„ web åº”ç”¨ä¸­æ˜¯éžå¸¸å¸¸è§çš„ä¸€ä¸ªåŠŸèƒ½è®¾è®¡ã€‚ä¼—å¤š web æ¡†æž¶ï¼ˆexpressã€koaã€nest.jsã€connect ç­‰ï¼‰éƒ½æœ‰ä¸­é—´ä»¶çš„è®¾è®¡æ”¯æŒã€‚è™½ç„¶ä¸åŒæ¡†æž¶ä¸­é—´ä»¶æ²¡æœ‰ç»Ÿä¸€çš„è®¾è®¡è§„èŒƒï¼Œä½†åœ¨åŠŸèƒ½å’Œå®žçŽ°ä¸Šå‡ ä¹Žæ˜¯å¼‚æ›²åŒå·¥çš„ã€‚ ä¸­é—´ä»¶åœ¨ web æœåŠ¡ä¸­ä¸»è¦çš„ä½œç”¨å°±æ˜¯è®¿é—® request å’Œ response å¯¹è±¡ï¼Œå®Œæˆç‰¹å®šä»»åŠ¡åŽä¸‹å‘åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚ä¸­é—´ä»¶çš„è®¾è®¡æžå¤§çš„å¯¹è¯·æ±‚è¿›è¡Œäº†åˆ†ç‰‡åŒ–ï¼Œå¯ä»¥è®©å¾ˆå¤šåŽŸæœ¬éœ€è¦åœ¨ controller ä¸­å¤„ç†çš„é—®é¢˜æ›´æ–¹ä¾¿çš„åšç»Ÿä¸€çš„é€»è¾‘å¤„ç†ã€‚ æˆ‘æ ¹æ®ä¸­é—´ä»¶çš„ç”Ÿæˆä¸»è¦å°†å…¶åˆ†ä¸ºä¸¤ç§ å·¥åŽ‚åŒ–ä¸­é—´ä»¶ ç®€å•æ¥è®²å°±æ˜¯æœ‰ä¸€ä¸ªå·¥åŽ‚å‡½æ•°ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°åŠ¨æ€ç”Ÿæˆçš„ä¸­é—´ä»¶ï¼Œè¿™æ ·çš„ä¸­é—´ä»¶ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°ä¸åŒå¯èƒ½ä¼šæœ‰ä¸åŒçš„å¤„ç†é€»è¾‘ é™æ€ä¸­é—´ä»¶ ä»Žä¸€å¼€å§‹å°±ç¡®å®šå·¥ä½œå†…å®¹çš„ä¸­é—´ä»¶ è®¾è®¡è§„èŒƒmiddleware å’Œ controller éƒ½å¯ä»¥è®¿é—® request å’Œ response å¯¹è±¡ï¼Œä¹Ÿå¯å®Œæˆå’Œ controller ä¸€æ ·çš„äº‹æƒ…ï¼Œé‚£ä¹ˆ middleware å’Œ controller æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ é¦–å…ˆ middleware çš„è®¾è®¡åº”è¯¥éµå®ˆä»¥ä¸‹å‡ ä¸ªè§„èŒƒï¼š åŽ»ä¸­å¿ƒåŒ–çš„ é¿å…é—­åŒ…è®¾è®¡ æ— è®ºæ˜¯å·¥åŽ‚åŒ–ä¸­é—´ä»¶è¿˜æ˜¯é™æ€ä¸­é—´ä»¶ï¼Œä¸€æ—¦ç¡®å®šåœ¨ runtime å°±æ˜¯ä¸å¯å˜æ›´çš„ åŽ»ä¸­å¿ƒåŒ–è¿™æ˜¯å’Œ controller è®¾è®¡åŒºåˆ«æœ€å¤§çš„åœ°æ–¹ã€‚ äº‹å®žä¸Šï¼Œcontroller ä¹Ÿå¯ä»¥ç®—æ˜¯ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä½†æ˜¯ controller é€šå¸¸æ˜¯è®¾è®¡ä¸ºå…·æœ‰ä¸šåŠ¡ç›¸å…³æ€§çš„æ–¹æ³•ï¼Œæˆ‘å°† controller åœ¨ node ä¸­çš„è®¾è®¡å®šä½ fake-middlewareã€‚ è€Œæˆ‘ä»¬éœ€è¦çœŸæ­£åŽ»è®¾è®¡çš„ middleware åº”è¯¥æ˜¯å…·æœ‰ä¸šåŠ¡æ— å…³æ€§çš„ï¼Œä¸€ä¸ªæ— çŠ¶æ€çš„åŽ»ä¸­å¿ƒåŒ–çš„æ–¹æ³•ã€‚middleware åº”è¯¥å…·æœ‰æ›´å¼ºçš„é€šç”¨æ™®é€‚æ€§ï¼Œè¿™ä¸ªé€šç”¨æ€§åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯åº”ç”¨ç›¸å…³çš„ï¼Œä¸€ç§æ˜¯åº”ç”¨æ— å…³çš„ã€‚ å…ˆè¯´åº”ç”¨ç›¸å…³æ€§çš„ä¸­é—´ä»¶ï¼šä¾‹å¦‚ä¸€ä¸ªçŸ­ä¿¡åº”ç”¨ï¼Œé€šå¸¸ä¼šæœ‰å„ç§é˜²åˆ·æœºåˆ¶ï¼Œè¿™ç§é¢„é˜²æœºåˆ¶é€šå¸¸æ˜¯åœ¨ä¸­é—´ä»¶ä¸­å®žçŽ°çš„ã€‚çŸ­ä¿¡çš„é˜²åˆ·å’ŒçŸ­ä¿¡å‘é€æœ¬èº«æ˜¯ä¸šåŠ¡æ— å…³çš„ï¼Œä½†æ˜¯çŸ­ä¿¡é˜²åˆ·æœºåˆ¶é€šå¸¸åªåœ¨çŸ­ä¿¡ç›¸å…³åº”ç”¨ï¼ˆç”¨æˆ·ç³»ç»Ÿï¼ŒçŸ­ä¿¡ç³»ç»Ÿç­‰ï¼‰ä¸­éœ€è¦ã€‚è¿™ç§ä¸­é—´ä»¶å°±æ˜¯å…·æœ‰åº”ç”¨ç›¸å…³æ€§çš„ã€‚ å†è¯´åº”ç”¨æ— å…³æ€§çš„ä¸­é—´ä»¶ï¼šå¾ˆå¸¸è§çš„ä¸€äº›ä¸­é—´ä»¶å¦‚ corsã€body-parser ç­‰ï¼Œéƒ½æ˜¯å…·æœ‰éžå¸¸å¼ºçš„é€šç”¨æ€§ï¼Œè€Œä¸”å’Œä»»ä½•ç±»åž‹åº”ç”¨éƒ½æ²¡æœ‰ç›¸å…³æ€§ã€‚ æœ€åŽï¼Œæ— çŠ¶æ€çš„åŽ»ä¸­å¿ƒåŒ–æ€Žä¹ˆç†è§£ï¼Ÿä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ Java åº”ç”¨ä¸­ï¼Œcontroller é€šå¸¸ä¼šå…ˆå¯¹è¯·æ±‚çš„å‚æ•°åšå‚æ•°æ£€æŸ¥ã€‚åœ¨ node ä¸­å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥åšç»Ÿä¸€çš„å‚æ•°æ£€æŸ¥ã€‚ä½†æ˜¯ä¸åŒçš„æŽ¥å£é€šå¸¸éƒ½éœ€è¦ä¸åŒçš„å‚æ•°ï¼Œå¦‚æžœæ¯ä¸ªæŽ¥å£éƒ½è®¾è®¡ä¸€ä¸ª middleware æ¥åšå‚æ•°æ£€æŸ¥ï¼Œé‚£å°±æ˜¾å¾—å¾ˆé¸¡è‚‹ï¼ˆæˆ‘å¹²å˜›åšè¿™ç§è ¢äº‹ï¼Ÿï¼‰ã€‚ä½†å®žé™…ä¸Šæˆ‘è¿˜çœŸè§åˆ°è¿‡ðŸ˜‚ã€‚ ä»¥ egg ä¸ºä¾‹ï¼Œæˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªä¾‹å­çœ‹ä¸€ä¸‹1234567891011// example-1 - badasync function ParamterValidateMiddleware(ctx, next) &#123; const &#123; body &#125; = ctx.request; ctx.validate(&#123; param1: 'string', param2: 'number' &#125;, body); await next();&#125; 1234567891011// example-2 - goodfunction ParamterValidateMiddlewareFactory(options) &#123; return async function ParamterValidateMiddleware(ctx, next) &#123; const &#123; body &#125; = ctx.request; const &#123; rules &#125; = options; ctx.validate(rules, body); await next(); &#125;&#125; example-1 çš„è®¾è®¡åªèƒ½é’ˆå¯¹å•ä¸€çš„æŽ¥å£ï¼Œå¦‚æžœå‚æ•°å‘ç”Ÿå˜åŠ¨ï¼Œå°±éœ€è¦ä¿®æ”¹å¯¹åº”çš„ middlware æ–¹æ³•ã€‚ example-2 å°†å‚æ•°æ ¡éªŒè¿›è¡Œå·¥åŽ‚åŒ–è®¾è®¡ï¼Œé€šè¿‡ä¼ å…¥çš„ rulesï¼ŒåŠ¨æ€ç”Ÿæˆå¯¹åº”æŽ¥å£æ‰€éœ€çš„ä¸­é—´ä»¶ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨å…¨å±€ç»´æŠ¤ç»Ÿä¸€çš„å‚æ•°è¡¨ã€‚ é¿å…é—­åŒ…è®¾è®¡æ— è®ºæ˜¯å‰ç«¯åŽç«¯ï¼Œåªè¦æ˜¯åš js çš„ï¼Œé‚£ä¹ˆé¢è¯•çš„æ—¶å€™åº”è¯¥å¾ˆç»å¸¸èƒ½é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯é—­åŒ…ã€‚å¯¹äºŽé—­åŒ…çš„çŸ¥è¯†ï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦ï¼Œè¿™é‡Œå°±ä¸å±•å¼€ã€‚ä¸­é—´ä»¶ä¸­é¿å…é—­åŒ…çš„è®¾è®¡ï¼Œä¸»è¦æ˜¯é—­åŒ…æ˜¯å¼•èµ·å†…å­˜æ³„éœ²çš„ä¸€ä¸ªå› ç´ ã€‚åœ¨ä¸­é—´ä»¶ä¸­ï¼Œä¸è§„èŒƒçš„é—­åŒ…è®¾è®¡ä¼šé€ æˆæ•…éšœæŽ’æŸ¥çš„å›°éš¾ï¼ˆå†…å­˜æ³„éœ²æ²¡æœ‰é”™è¯¯å †æ ˆå¯ä»¥çœ‹å•Šï¼ðŸ˜£ï¼‰ã€‚ ä¸¾ä¸ªä¾‹å­ðŸŒ°ï¼š1234567async function ClosureInMiddleware(ctx, next) &#123; function setSomethingToReq() &#123; ctx.req[Symbol.for('Somthing')] = Date.now(); &#125; await next();&#125;]]></content>
      <tags>
        <tag>node.js</tag>
        <tag>javascript</tag>
        <tag>koa</tag>
        <tag>middleware</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[X-Y PROBLEM]]></title>
    <url>%2F2019%2F05%2F22%2FX-Y-PROBLEM%2F</url>
    <content type="text"><![CDATA[1ï¼‰æœ‰äººæƒ³è§£å†³é—®é¢˜X 2ï¼‰ä»–è§‰å¾—Yå¯èƒ½æ˜¯è§£å†³Xé—®é¢˜çš„æ–¹æ³• 3ï¼‰ä½†æ˜¯ä»–ä¸çŸ¥é“Yåº”è¯¥æ€Žä¹ˆåš 4ï¼‰äºŽæ˜¯ä»–åŽ»é—®åˆ«äººYåº”è¯¥æ€Žä¹ˆåšï¼Ÿ]]></content>
  </entry>
  <entry>
    <title><![CDATA[typescript - decorator(1)]]></title>
    <url>%2F2019%2F03%2F01%2Ftypescript-decorator%2F</url>
    <content type="text"><![CDATA[ä»‹ç»With the introduction of Classes in TypeScript and ES6, there now exist certain scenarios that require additional features to support annotating or modifying classes and class members. Decorators provide a way to add both annotations and a meta-programming syntax for class declarations and members. ç¿»è¯‘ï¼š éšç€ typescript å’Œ es6 ä¸­ç±»çš„å¼•å…¥ï¼ŒçŽ°åœ¨å­˜åœ¨ä¸€äº›åœºæ™¯ï¼Œéœ€è¦é¢å¤–çš„åŠŸèƒ½æ¥æ”¯æŒå¯¹ç±»å’Œç±»æˆå‘˜è¿›è¡Œä¿®é¥°æˆ–ä¿®æ”¹ã€‚decorator(è£…é¥°å™¨) æä¾›äº†ä¸€ç§ä¸ºç±»å£°æ˜Žå’Œæˆå‘˜æ·»åŠ ä¿®é¥°å’Œå…ƒç¼–ç¨‹è¯­æ³•çš„æ–¹æ³•ã€‚ è£…é¥°å™¨è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šç±»åž‹çš„å£°æ˜Žï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ°ç±»å£°æ˜Žï¼Œæ–¹æ³•ï¼Œ è®¿é—®ç¬¦ï¼Œå±žæ€§æˆ–å‚æ•°ä¸Šã€‚ è£…é¥°å™¨ä½¿ç”¨ @expression è¿™ç§å½¢å¼ï¼Œexpression æ±‚å€¼åŽå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œè¢«è£…é¥°çš„å£°æ˜Žä¿¡æ¯åšä¸ºå‚æ•°ä¼ å…¥ã€‚ è£…é¥°å™¨çš„ä½œç”¨æ˜¯ä¸ºç±»å£°æ˜Žå’Œæˆå‘˜æ·»åŠ ä¿®é¥°å’Œå…ƒç¼–ç¨‹è¯­æ³•ã€‚é¦–å…ˆè¦äº†è§£ï¼Œä»€ä¹ˆæ ·çš„åœºæ™¯ä¸‹éœ€è¦åšè¿™æ ·çš„è£…é¥°å™¨ã€‚ æœ‰ä¸€ä¸ªç±» Person:12345class Person &#123; say(sentence) &#123; console.log(sentence); &#125;&#125; Person æœ‰ä¸€ä¸ªå®žä¾‹æ–¹æ³• sayï¼Œå¯ä»¥è¯´è¯ã€‚ä½†æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ å‡å¦‚ Person çš„å®žä¾‹ mick å–œæ¬¢è¯´è„è¯ï¼Œæ¯”å¦‚ cnm è¿™æ ·çš„ã€‚é‚£ä¹ˆæˆ‘æƒ³è®© mick æ²‰é»˜ï¼Œæˆ–è€… cnm å°±å˜æˆ bi~~~~ã€‚ é€šå¸¸çš„åšæ³•æ˜¯ç»™ say æ–¹æ³•åŠ ä¸€äº›å†…å®¹:12345678class Person &#123; say(sentence) &#123; sentence = sentence.replace(/cnm/g, 'bi~~~'); console.log(sentence); &#125;&#125;const mick = new Person();mick.say(); ç”¨è£…é¥°å™¨å®žçŽ°123456789101112131415161718// workFilter æ˜¯ä¸€ä¸ª decoratorfunction wordFilter(target: any, name: string, descriptor: PropertyDescriptor) &#123; const fun = descriptor.value; descriptor.value = function(sentence) &#123; sentence = sentence.replace(/cnm/g, 'bi~~~'); return fun.call(this, sentence); &#125;&#125;class Person &#123; @wordFilter say(sentence) &#123; console.log(sentence); &#125;&#125;const mick = new Person();mick.say(); ç®€å•ç†è§£è£…é¥°å™¨å°±æ˜¯åœ¨åŽŸæœ‰çš„ä»£ç ä¸ŠåŒ…è£…äº†ä¸€å±‚ï¼Œ å¯ä»¥æƒ³åƒæ‰‹æžªçš„æžªå£è£…äº†æ¶ˆéŸ³å™¨ï¼Œæ°´é¾™å¤´çš„è¿›æ°´ç®¡åŠ è£…äº†å‡€æ°´å™¨ä¸€æ ·ï¼Œä¸æ”¹å˜åŽŸæœ‰çš„å®žçŽ°é€»è¾‘ï¼Œå¢žåŠ åŽŸæ¥ä¸å­˜åœ¨çš„åŠŸèƒ½æˆ–ç‰¹æ€§ã€‚ è£…é¥°å™¨ç§ç±»è£…é¥°å™¨ä¸»è¦åˆ†ä¸ºç±»è£…é¥°å™¨å’Œæ–¹æ³•è£…é¥°å™¨ï¼Œåˆ†åˆ«ç”¨æ¥ä¿®é¥°ç±»å£°æ˜Žå’Œæˆå‘˜ã€‚ ç±»è£…é¥°å™¨ç±»è£…é¥°å™¨åªæœ‰ä¸€ä¸ªå‚æ•° target ç±»çš„æž„é€ å‡½æ•° æ–¹æ³•è£…é¥°å™¨æ–¹æ³•è£…é¥°å™¨æœ‰ä¸‰ä¸ªå‚æ•° target any, å¯¹äºŽé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æž„é€ å‡½æ•°ï¼Œå¯¹äºŽå®žä¾‹æˆå‘˜æ˜¯ç±»çš„åŽŸåž‹å¯¹è±¡ name string, æˆå‘˜çš„åå­— descriptor TypedPropertyDescriptor, æˆå‘˜çš„å±žæ€§æè¿°ç¬¦ value: any æˆå‘˜çš„å€¼ writable: boolean æ˜¯å¦ä¿®æ”¹ enumerable: boolean æ˜¯å¦å¯éåŽ† configurable: boolean æˆå‘˜æè¿°æ˜¯å¦å¯æ”¹å˜æˆ–è€…æˆå‘˜æ˜¯å¦å¯åˆ é™¤ get æˆå‘˜çš„ getter æ–¹æ³• set æˆå‘˜çš„ setter æ–¹æ³• è£…é¥°å™¨å·¥åŽ‚è£…é¥°å™¨å·¥åŽ‚å°±æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ƒè¿”å›žä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»¥ä¾›è£…é¥°å™¨åœ¨è¿è¡Œæ—¶è°ƒç”¨ã€‚12345678910111213141516171819function wordFilter(word) &#123; const reg = new RegExp(word, 'g'); return function wordFilter(target: any, name: string, descriptor: PropertyDescriptor) &#123; const fun = descriptor.value; descriptor.value = function(sentence) &#123; sentence = sentence.replace(reg, 'bi~~~'); return fun.call(this, sentence); &#125; &#125;&#125;@wordFilter('cnm')class Person &#123; @wordFilter say(sentence) &#123; console.log(sentence); &#125;&#125; å‚è€ƒ ã€Typescript - Decoratorsã€‘]]></content>
      <tags>
        <tag>typescript</tag>
        <tag>javascript</tag>
        <tag>decorator</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[exports å’Œ module.exports çš„åŒºåˆ«]]></title>
    <url>%2F2018%2F07%2F16%2Fexports-%E5%92%8C-module-exports-%E7%9A%84%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"><![CDATA[node.js ç¼–å†™æ¨¡å—çš„æ—¶å€™ï¼Œä¸ºäº†ä¿è¯æ¨¡å—çš„å¯è¯»æ€§ï¼ŒæŽ¨èæŠŠä¸åŒåŠŸèƒ½çš„ä»£ç éƒ½å†™æˆç‹¬ç«‹çš„æ¨¡å—ï¼Œå‡å°‘å„æ¨¡å—çš„è€¦åˆã€‚ åœ¨ node ä¸­ï¼Œ æ¯ä¸ª js æ‰§è¡Œæ–‡ä»¶éƒ½ä¼šè‡ªåŠ¨åˆ›å»º module å¯¹è±¡ï¼ŒåŒæ—¶ã€‚module å¯¹è±¡é»˜è®¤å¸¦æœ‰ exports å±žæ€§ã€‚åˆå§‹å€¼æ˜¯ {}ã€‚1module.exports = &#123;&#125;; åœ¨ js æ¨¡å—é‡Œï¼Œå¯ä»¥ç›´æŽ¥è°ƒç”¨ module å’Œ exports å¯¹è±¡ã€‚ä½† exports æ˜¯ module.exports çš„ä¸€ä¸ªå¼•ç”¨ã€‚ module.js12345var say = function(name) &#123; console.log('hello ' + name);&#125;exports.say = say; index.js123var module = require('module.js');module.say('god'); // console print: hello god. åœ¨ node çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠ js æ¨¡å—è¿›è¡Œå°è£…ã€‚12345678// require æ˜¯å¯¹ Node.js å®žçŽ°æŸ¥æ‰¾æ¨¡å—çš„ Module._load å®žä¾‹çš„å¼•ç”¨// __finename å’Œ __dirname æ˜¯ Node.js åœ¨æŸ¥æ‰¾è¯¥æ¨¡å—åŽæ‰¾åˆ°çš„æ¨¡å—åç§°å’Œæ¨¡å—ç»å¯¹è·¯å¾„(function(exports,require,module,__filename,__dirname)&#123; function say(name)&#123; console.log('hello ' + name); &#125; exports.say = say;&#125;) è¦å°†å‡½æ•°ç›´æŽ¥å¯¼å‡ºæˆæ¨¡å—è€Œä¸æ˜¯ exports çš„ä¸€ä¸ªæ–¹æ³•ï¼Œéœ€è¦ module.js123456var say = function(name) &#123; console.log('hello ' + name);&#125;module.exports = say;// wrong example// exports = say; index.js12var say = require('module.js');say('god'); // console print: hello god ç»¼ä¸Šï¼Œåœ¨ js æ¨¡å—åˆ›å»ºçš„æ—¶å€™1exports = module.exports = &#123;&#125;; exports æ˜¯ module.exports çš„ä¸€ä¸ªå¼•ç”¨ module.exports åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ {}ï¼Œæ‰€ä»¥ exports åˆå§‹å€¼ä¹Ÿæ˜¯ {} require å¼•ç”¨æ¨¡å—åŽï¼Œè¿”å›žçš„æ˜¯ module.exports è€Œä¸æ˜¯ exports exports.xxx ç›¸å½“äºŽåœ¨å¯¼å‡ºå¯¹è±¡ä¸ŠæŒ‚å±žæ€§ï¼Œè¯¥å±žæ€§å¯¹è°ƒç”¨æ¨¡å—ç›´æŽ¥å¯è§ exports = ç›¸å½“äºŽç»™ exports å¯¹è±¡é‡æ–°èµ‹å€¼ï¼Œè°ƒç”¨æ¨¡å—ä¸èƒ½è®¿é—® exports å¯¹è±¡åŠå…¶å±žæ€§ å¦‚æžœæ­¤æ¨¡å—æ˜¯ä¸€ä¸ªç±»ï¼Œå°±åº”è¯¥ç›´æŽ¥èµ‹å€¼ module.exportsï¼Œè¿™æ ·è°ƒç”¨è€…å°±æ˜¯ä¸€ä¸ªç±»æž„é€ å™¨ï¼Œå¯ä»¥ç›´æŽ¥ new å®žä¾‹ã€‚ ä¾‹å¦‚1234var obj = &#123; inner : &#123;&#125;&#125;;var inner = obj.inner; inner å°±æ˜¯ obj.inner çš„ä¸€ä¸ªå¼•ç”¨ï¼Œæ”¹å˜ inner çš„å±žæ€§ä¼š åŒæ—¶å¯¹ obj.inner çš„å±žæ€§è¿›è¡Œæ”¹å˜123456789inner.name= 'god';console.log(obj);/*** &#123;* inner: &#123;* name: 'god'* &#125;* &#125;*/ ä½†æ˜¯å¯¹ inner é‡æ–°èµ‹å€¼ï¼Œå¹¶ä¸ä¼šå¯¹ obj.inner é€ æˆå½±å“123456789inner = &#123;name: 'devil'&#125;;console.log(obj);/*** &#123;* inner: &#123;* name: 'god'* &#125;* &#125;*/]]></content>
      <tags>
        <tag>node.js</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[grpc typescript å®žä¾‹]]></title>
    <url>%2F2018%2F06%2F26%2Fgrpc-typescript-%E5%AE%9E%E4%BE%8B%2F</url>
    <content type="text"><![CDATA[å‰è¨€gRPC æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€å¼€æºå’Œé€šç”¨çš„ RPC æ¡†æž¶ï¼Œé¢å‘ç§»åŠ¨å’Œ HTTP/2 è®¾è®¡ã€‚ç›®å‰æä¾› Cã€Java å’Œ Go è¯­è¨€ç‰ˆæœ¬ï¼Œåˆ†åˆ«æ˜¯ï¼šgrpc, grpc-java, grpc-go. å…¶ä¸­ C ç‰ˆæœ¬æ”¯æŒ C, C++, Node.js, Python, Ruby, Objective-C, PHP å’Œ C# æ”¯æŒ. gRPC åŸºäºŽ HTTP/2 æ ‡å‡†è®¾è®¡ï¼Œå¸¦æ¥è¯¸å¦‚åŒå‘æµã€æµæŽ§ã€å¤´éƒ¨åŽ‹ç¼©ã€å• TCP è¿žæŽ¥ä¸Šçš„å¤šå¤ç”¨è¯·æ±‚ç­‰ç‰¹ã€‚è¿™äº›ç‰¹æ€§ä½¿å¾—å…¶åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¡¨çŽ°æ›´å¥½ï¼Œæ›´çœç”µå’ŒèŠ‚çœç©ºé—´å ç”¨ã€‚ æ­£å¦‚å…¶ä»– RPC ç³»ç»Ÿï¼ŒgRPC åŸºäºŽå¦‚ä¸‹æ€æƒ³ï¼šå®šä¹‰ä¸€ä¸ªæœåŠ¡ï¼Œ æŒ‡å®šå…¶å¯ä»¥è¢«è¿œç¨‹è°ƒç”¨çš„æ–¹æ³•åŠå…¶å‚æ•°å’Œè¿”å›žç±»åž‹ã€‚gRPC é»˜è®¤ä½¿ç”¨ protocol buffers ä½œä¸ºæŽ¥å£å®šä¹‰è¯­è¨€ï¼Œæ¥æè¿°æœåŠ¡æŽ¥å£å’Œæœ‰æ•ˆè½½è·æ¶ˆæ¯ç»“æž„ã€‚ åŒ…è£…æœ€è¿‘è½¬å‘ typescript åš node å¼€å‘ï¼Œ åŸºäºŽ express çš„ mvc æœåŠ¡æ¡†æž¶æ¶‰åŠåˆ°ä¸Žå…¶ä»–è¯­è¨€æœåŠ¡è¿›ç¨‹é€šä¿¡ï¼ŒäºŽæ˜¯å°±æŠŠä¹‹å‰ç”¨ javascript å†™çš„ grpc åŒ…è£…é‡æ–°ç”¨ typescript å†™äº†ä¸€éã€‚ grpc-ts åˆ†ä¸ºä¸¤ä¸ªåŒ…ï¼Œä¸€ä¸ªæœåŠ¡ç«¯ç”¨çš„ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯ç”¨çš„, ç‚¹å‡»å¯è·³è½¬åˆ° GitHub: grpc-server-ts grpc-client-ts ä½¿ç”¨è¿™é‡Œæ˜¯é…åˆåŸºäºŽ express çš„ typescript-mvc æ¡†æž¶ mvc-ts ä½¿ç”¨çš„ã€‚ mvc-ts å®šä¹‰ç»Ÿä¸€çš„ proto æ–‡ä»¶hello.proto12345678910111213141516171819syntax = "proto3";option java_multiple_files = true;option java_package = "io.grpc.service.test";option objc_class_prefix ="RTG";package hello;service Hello &#123; rpc say(stream Empty) returns (stream Word) &#123;&#125;;&#125;message Empty &#123;&#125;message Word &#123; string word = 1;&#125; æœåŠ¡ç«¯ä½¿ç”¨å®šä¹‰servicehelloService.ts123456789import &#123; Route, Service &#125; from "grpc-server-ts";@Service('path_to_hello.proto')export class HelloService &#123; @Route public async say() &#123; return 'hello world'; &#125;&#125; å¼€å¯æœåŠ¡1234567import &#123; RpcRegistry, Settings &#125; from 'grpc-server-ts';import 'helloService.ts';@Settings(settings)class RPC extends RpcRegistry &#123; &#125;RPC.start(); settings å‚æ•°1234567&#123; port: "3333", // listen port host: "localhost", // listen host ca: "runtime/rpc/ca.crt", // ca file path cert: "runtime/rpc/server.crt", // cert file path key: "runtime/rpc/server.key" // key file path&#125; æœåŠ¡ç«¯çš„ grpc å°±å¯åŠ¨åœ¨ localhost:3333 å®¢æˆ·ç«¯ä½¿ç”¨å®šä¹‰client, Hello.ts1234567import &#123; Route, Client &#125; from 'grpc-client-ts';@Client(__dirname + '/protobuf/Hello.proto')export class Hello &#123; @Route public async say(data, result) &#123; &#125;&#125; åˆ›å»ºä¸€ä¸ªcontrollerï¼ŒHelloController.ts12345678910111213141516import * as Express from 'express';import &#123; Inject, RestController, Get, Res &#125; from "mvc-ts";import &#123; Hello &#125; from 'Hello.ts';@RestController('/example')export class HelloController &#123; @Inject() private helloRpc: Hello; @Get('/hello') public async indexAction(@Res() res: Express.Response) &#123; let result = await this.helloRpc.say(&#123;&#125;); res.json(result); &#125;&#125; å¼€å¯æœåŠ¡, index.ts1234567891011121314import &#123; ApplicationLoader, ApplicationSettings, Inject, ConfigContainer &#125; from 'mvc-ts';import 'HelloController.ts';import 'Hello.ts';@ApplicationSettings(&#123; rootDir: `$&#123;__dirname&#125;/../` &#125;)class Application extends ApplicationLoader &#123; &#125;const Application = new CpApplication();Application.start(5566);@Settings(settings)class ClientRpc extends RpcClientRegistry &#123; &#125;ClientRpc.start(); settings å‚æ•°1234567&#123; port: "3333", // server side grpc port host: "localhost", // server side grpc host ca: "runtime/rpc/ca.crt", // ca file path client_cert: "runtime/rpc/server.crt", // client_cert file path client_key: "runtime/rpc/server.key" // client_key file path&#125; è¿è¡Œä»£ç 1ts-node index.ts ts-node æˆ‘æ˜¯ç”¨çš„ 4.x çš„ç‰ˆæœ¬ æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5566/example/hello èŽ·å¾—ç»“æžœ123&#123; "word": "hello world"&#125;]]></content>
      <tags>
        <tag>typescript</tag>
        <tag>grpc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ©ç”¨scssæ–¹æ³•æž„å»ºåƒç´ åŒ–å½¢è±¡]]></title>
    <url>%2F2017%2F06%2F10%2F%E5%88%A9%E7%94%A8scss%E6%96%B9%E6%B3%95%E6%9E%84%E5%BB%BA%E5%83%8F%E7%B4%A0%E5%8C%96%E5%BD%A2%E8%B1%A1%2F</url>
    <content type="text"><![CDATA[åƒç´ æ˜¯ä¸€ä¸ªä¸€ä¸ªè‰²å—ç»„æˆçš„ï¼Œåƒç´ åŒ–é¡¾åæ€ä¹‰å°±æ˜¯å°†å›¾åƒåˆ†æˆä¸€å®šçš„åŒºåŸŸï¼Œå¹¶å°†è¿™äº›åŒºåŸŸè½¬æ¢æˆç›¸åº”çš„è‰²å—ï¼Œå†æœ‰è‰²å—æž„æˆå›¾å½¢ã€‚ç±»ä¼¼äºŽè‰²å½©æž„å›¾ã€‚ç®€å•è¯´å°±æ˜¯å°†å›¾åƒè½¬æ¢æˆåƒç´ ç‚¹ç»„æˆçš„ç‚¹é˜µå›¾å½¢ï¼Œä¹Ÿå«æ …æ ¼åŒ–ã€‚ å‡†å¤‡ç»˜åˆ¶åƒç´ åŒ–å›¾åƒï¼Œæˆ‘ä»¬å…ˆè¦å°†å½¢è±¡è¿›è¡Œåƒç´ åŒ–ï¼Œå°†åƒç´ åŒ–åŽçš„ç‚¹é˜µå›¾åƒæè¿°å‡ºæ¥ï¼Œå°±æ˜¯é¢œè‰²çŸ©é˜µ ä¸ºæ­¤ï¼Œæˆ‘ä»¬å…ˆåˆ†æžå›¾åƒä¸Šçš„é¢œè‰²ï¼Œå…±æœ‰å››ç§é¢œè‰² #fefe00(é»„), #823e00(è¤), #c69(çº¢), #000(é»‘) æˆ‘ä»¬å°†å›¾åƒçš„é¢œè‰²ç”¨çŸ©é˜µæè¿°å‡ºæ¥12345678910111213141516171819202122232425262728// scssä»£ç // é¢œè‰²å‘½å$colors: ( y: #fefe00, h: #823e00, r: #c69, k: #000);// å›¾åƒçŸ©é˜µ$pixel-art:( $pikachu:( (o o o o o o o o o o o o o o o) (o o o o k k o o o o o o o o o) (k k k k k k k k k o o o o o o) (k k k k k k k y y k k k o o o) (o k y y y k y y y y y y k o o) (o o k y y k k y y y y y y k o) (o o o k y y k y y y y y y k o) (o k k k y k y y y y y k y y k) (o k y y y k y y y r y y y y k) (o o k h k h h h y y y y y k o) (o k h h k y y y y y y k y k o) (o o k h k h h h y y k k y k o) (o o o k k k y y y y y y y k o) (o o o o o o k k y y y k k o o) (o o o o o o o o k k k o o o o) )) ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬çš„çš®å¡ä¸˜çš„é¢œè‰²çŸ©é˜µäº†ï¼ŒçŽ°åœ¨åªè¦å°†çŸ©é˜µä¸Šçš„æ¯ä¸€ä¸ªç‚¹åƒç´ åŒ–å°±å¯ä»¥äº† åƒç´ åŒ–box-shadow å¯ä»¥ä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ å¤šä¸ªé˜´å½±å—ï¼Œæˆ‘ä»¬æŠŠæ¯ä¸ªåƒç´ å½“ä½œä¸€å—é˜´å½±è¿›è¡Œå¡«å……ï¼Œç”¨scssä¸­çš„å‡½æ•°éåŽ†çŸ©é˜µï¼Œå°†æ¯ä¸ªé¢œè‰²ç‚¹åƒç´ åŒ–1234567891011121314151617181920212223242526272829303132333435363738// scss ä»£ç  // å®šä¹‰æ¯ä¸ªåƒç´ çš„å¤§å°ï¼Œå®½é«˜ç­‰å€¼$pixel-size: 4px !default;// åƒç´ åŒ–å‡½æ•°@function pixelize($matrix, $size) &#123; $l: length($matrix); // çŸ©é˜µé•¿åº¦ $sh: ''; // é˜´å½±å€¼ @for $row from 1 through $l &#123; // éåŽ†æ¯ä¸€è¡Œ $row-num: nth($matrix,$row); // èŽ·å–æ¯ä¸€è¡Œæœ‰å¤šå°‘ç‚¹ @for $col from 1 through length($row-num) &#123; // éåŽ†æ¯ä¸€è¡Œçš„èŠ‚ç‚¹ $dot: nth($row-num, $col); // ç‚¹çš„ä½ç½® $sh: $sh+ ($col*$size)+' '+($row*$size)+' '+map-get($colors,$dot); // å¡«å……è¯¥ç‚¹çš„é˜´å½±å€¼ @if not ($col == length($row-num) and $row==$l)&#123; $sh:$sh+','; &#125; &#125; &#125; @return unquote($sh);&#125;@mixin style-item($matrix,$size)&#123; width: $size*length(nth($matrix,1)); // å®¹å™¨çš„å®½ï¼Œä¸Žåƒç´ åŒ–å›¾å½¢ç­‰å®½ height: $size*length($matrix); // å®¹å™¨çš„é«˜ï¼Œä¸Žåƒç´ åŒ–å›¾å½¢ç­‰é«˜ &amp;:after &#123; content: ''; position: absolute; top:-$size; left: -$size; width: $size; height: $size; box-shadow: pixelize($matrix, $size); // å¡«å……é˜´å½± &#125;&#125;// éåŽ†æˆ‘ä»¬çš„æ¯ä¸€ä¸ªåƒç´ åŒ–å›¾å½¢ï¼Œå°†æ¯ä¸ªå›¾å½¢çš„é˜´å½±æ”¾åˆ°å¯¹åº”çš„ class ä¸Š@each $key,$value in $pixel-art &#123; .#&#123;$key&#125;&#123; @include style-item($value,$pixel-size); &#125;&#125; ç»“æŸæŽ¥ä¸‹æ¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯ï¼Œç¼–è¯‘è¿™äº› scss ä»£ç åˆ° css æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ gulp,babel ç­‰å·¥å…·, æœ€åŽï¼Œæˆ‘ä»¬åœ¨ html ä¸­å¼•å…¥è¿™ä¸ª css æ–‡ä»¶ï¼Œå¹¶ç»‘å®šå¯¹åº”çš„å›¾å½¢ class12345678&lt;html&gt; &lt;head&gt; &lt;link href='path/to/your.css' rel='stylesheet' /&gt; &lt;/head&gt; &lt;body&gt; &lt;div class='pikachu'&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; ä¸€åªåƒç´ åŒ–çš„çš®å¡ä¸˜å°±è·‘åˆ°æˆ‘ä»¬é¡µé¢ä¸Šäº†]]></content>
      <tags>
        <tag>css</tag>
        <tag>css3</tag>
        <tag>scss</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS å…¬å¸å†…æµ‹æ–¹æ¡ˆ]]></title>
    <url>%2F2017%2F05%2F20%2FiOS-%E5%85%AC%E5%8F%B8%E5%86%85%E6%B5%8B%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[App çš„æ­å»ºæ­£åœ¨å¦‚ç«å¦‚è¼çš„è¿›è¡Œä¸­ï¼Œæ¯å¤©éƒ½æœ‰æ–°çš„ build ç‰ˆæœ¬äº§ç”Ÿï¼Œä¸ºäº†æ–¹ä¾¿è·Ÿè¿›å¼€å‘å†…å®¹ä»¥åŠæ”¶é›†å»ºè®®ï¼Œæœ‰ iPhone è®¾å¤‡çš„åŒäº‹å¯ä»¥è¿›è¡Œç‰ˆæœ¬å†…æµ‹ï¼Œæˆ‘ä¼šå°†æ–°çš„ build ç‰ˆæœ¬è¿›è¡Œç¾¤å…±äº«ï¼Œè¿™é‡Œéœ€è¦æä¾›è‡ªå·±çš„ä¸€äº›ä¿¡æ¯ã€‚ UDIDios çš„ release ç‰ˆæœ¬éƒ¨ç½²é™¤äº†å¼€å‘è€…å¯ä»¥ä»»æ„éƒ¨ç½²å¤–ï¼Œè¦éƒ¨ç½²åˆ°å…¶ä»–äººçš„æ‰‹æœºä¸Šï¼Œéœ€è¦è¿›è¡Œè®¾å¤‡çš„ udid ç™»è®°ã€‚ èŽ·å– iPhone çš„ udid å¯ä»¥é€šè¿‡ iTunes æ‹¿åˆ°ã€‚å…·ä½“å¦‚å›¾ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[ä»Žæ•°ç»„Mä¸­æŠ½å–å°æ•°ç»„Nï¼Œæ±‚Nçš„ç»„åˆæƒ…å†µ]]></title>
    <url>%2F2017%2F04%2F06%2F%E4%BB%8E%E6%95%B0%E7%BB%84M%E4%B8%AD%E6%8A%BD%E5%8F%96%E5%B0%8F%E6%95%B0%E7%BB%84N%EF%BC%8C%E6%B1%82N%E7%9A%84%E7%BB%84%E5%90%88%E6%83%85%E5%86%B5%2F</url>
    <content type="text"><![CDATA[ç®—æ³•é¢˜ï¼šä»Žæ•°ç»„Mä¸­æŠ½å–å°æ•°ç»„Nï¼Œæ±‚Nçš„ç»„åˆæƒ…å†µï¼ŒNçš„å†…å®¹ç”¨ä¸‹æ ‡è¡¨ç¤ºã€‚æ¯”å¦‚Mï¼š[0,1,2,3]ï¼Œå–Nçš„é•¿åº¦ä¸º3ï¼Œç»“æžœçš„Né›†åˆä¸ºï¼š[0,1,2],[0,1,3],[0,2,3],[1,2,3]ã€‚åªè€ƒè™‘ç»„åˆï¼Œä¸è€ƒè™‘æŽ’åºï¼Œä¾‹å¦‚ [0,1,2], [0,2,1] åªç®—ä¸€ä¸ªã€‚ ç¡®å®šå…³ç³»M, N æ˜¯ä¸ç¡®å®šçš„ä¸¤ä¸ªæ•°ç»„ï¼ŒN æ˜¯ M æ»¡è¶³æƒ…å†µçš„å­é›†ï¼ŒM.length = m, N.length = n, n &lt; m. ä»¥ m=10, n=4ä¸ºä¾‹ã€‚1const m = 10, n = 4; åˆ›å»ºæ•°ç»„ M1const M = Array.from(&#123;length: m&#125;).map((it,i)=&gt;&#123;return i;&#125;); æ±‚å–æ•°ç»„ N çš„å¯èƒ½æ€§æˆ‘ä»¬é€šè¿‡ç¡®å®šæ¯ä¸€ä½çš„æƒ…å†µï¼Œé€ä½å‘åŽå¡«å……ï¼Œç›´è‡³å–åˆ°æ»¡è¶³ N çš„æ•°ç»„. å…ˆç¡®å®šç¬¬ä¸€ä½çš„æƒ…å†µã€‚12345678let N = [];for(let i = 0; i &lt; m - n + 1; i++)&#123; /** * N çš„æ¯ç§æƒ…å†µéƒ½æŒ‰é¡ºåºå¡«å…… * å½“ m = 10ï¼Œn = 4ï¼ŒN[0] çš„å–å€¼èŒƒå›´åº”è¯¥æ˜¯ [0~6] å³ m - n */ N[0] = i;&#125; é€šè¿‡è¿­ä»£å‘åŽå¡«å……ç¡®å®šäº†ç¬¬ä¸€ä½çš„æƒ…å†µåŽï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ­¤ç±»æŽ¨ï¼Œé€šè¿‡è¿­ä»£ï¼Œå°†ä¸‹ä¸€ä½çš„æ¯ç§æƒ…å†µè¿›è¡Œå¡«å…… å°†æ–¹æ³•å°è£…1234567891011const N_1 = N - 1;function getNextIndex(preN = [], index = 0, MIndex = 0)&#123; for(let i = 0; i &lt; m - MIndex - n + index + 1; i++)&#123; let N = []; // åˆ›å»ºæ–°çš„æ•°ç»„å¤‡ä»½ï¼Œå°†ä¸Šä¸€æ¬¡æ±‚åˆ° N çš„å†…å®¹è¿›è¡Œæ‹·è´ for(let t = 0; t &lt; index; t++)&#123; N[t] = preN[t]; &#125; N[index] = M[MIndex + i]; index &lt; N_1 ? getNextIndex(N, index + 1, i + MIndex +1) : null; &#125;&#125; è¿™æ ·å°±æ±‚å‡ºäº†æ‰€æœ‰æŒ‰é¡ºåºæŽ’åˆ—çš„ N çš„å¯èƒ½ç»„åˆã€‚ ç»¼åˆ1234567891011121314151617const m = 10, n = 4;const M = Array.from(&#123;length: m&#125;).map(function(it, i)=&gt;&#123;return i;&#125;);function arrayFilter()&#123; let N_RESULTS = [], RESULTS_MARK = 0; const N_1 = n - 1; getNextIndex(); function getNextIndex(preN = [], index = 0, MIndex = 0)&#123; for(let i = 0; i &lt; m - MIndex - n + index + 1; i++)&#123; let N = []; // åˆ›å»ºæ–°çš„æ•°ç»„å¤‡ä»½ï¼Œå°†ä¸Šä¸€æ¬¡æ±‚åˆ° N çš„å†…å®¹è¿›è¡Œæ‹·è´ for(let t = 0; t &lt; index; t++)&#123; N[t] = preN[t]; &#125; N[index] = M[MIndex + i]; index &lt; N_1 ? getNextIndex(N, index + 1, i + MIndex +1) : (N_RESULTS[RESULTS_MARK++] = N); &#125; &#125;&#125; Notesè¿™æ˜¯æ•´ç†è¿‡åŽçš„ä»£ç ï¼ŒåŽ»æŽ‰äº†å¾ˆå¤šæ•°ç»„æ“ä½œï¼Œç›¸æ¯”æ—§çš„ä»£ç ï¼Œæ€§èƒ½æå‡æ˜Žæ˜¾ æ—§çš„ç®—æ³•1234567891011121314const m = 10, n = 4;const M = Array.from(&#123;length: m&#125;).map(function(it, i)=&gt;&#123;return i;&#125;);function oldarrayFilter() &#123; let N_RESULTS = []; getNextIndex(); function getNextIndex(preN = [], index = 0, arrayIndex = 0) &#123; let N = Array.from(preN); let nextArray = M.slice(arrayIndex); for (let i = 0; i &lt; nextArray.length - n + index + 1; i++) &#123; N[index] = nextArray[i]; (N.length &lt; n) ? getNextIndex(N, index + 1, nextArray[i] + 1): N_RESULTS.push(N); &#125; &#125;&#125; é€šè¿‡ benchmark è¿™ä¸ªåº“æ¥æ£€æµ‹æ–°æ—§ç®—æ³•çš„æ•ˆçŽ‡1234&gt; node arrayFilter.jsnew x 48,368 ops/sec Â±1.41% (82 runs sampled)old x 1,322 ops/sec Â±1.83% (77 runs sampled)Fastest is new ä¸»è¦å·®å¼‚æ˜¯æ—§çš„ç®—æ³•ç”¨äº†è¾ƒå¤šçš„æ•°ç»„æ“ä½œï¼Œè™½ç„¶ç†è§£ä¸Šæ›´æ–¹ä¾¿ï¼Œå†™æ³•æ›´ç›´æŽ¥ï¼Œå´é€ æˆäº†è¾ƒå¤šçš„æ€§èƒ½å¼€é”€.]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>Array</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ­å»ºå±€åŸŸç½‘æœåŠ¡å™¨shdowsockséš§é“å®žçŽ°å±€åŸŸç½‘ä»£ç†]]></title>
    <url>%2F2017%2F02%2F16%2F%E6%90%AD%E5%BB%BA%E5%B1%80%E5%9F%9F%E7%BD%91%E6%9C%8D%E5%8A%A1%E5%99%A8shdowsocks%E9%9A%A7%E9%81%93%E5%AE%9E%E7%8E%B0%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[æŠ€æœ¯å…¬å¸ç»å¸¸éœ€è¦é€šè¿‡ç§‘å­¦ä¸Šç½‘åŽ»æŸ¥è¯¢è‹±æ–‡èµ„æ–™æˆ–é«˜é€Ÿä¸Šç½‘ï¼Œåœ¨å…¬å¸æ¯äººé…ç½®ä¸€ä¸ªè´¦å·åˆæ˜¾å¾—æµªè´¹ã€‚é€šè¿‡æ­å»ºå±€åŸŸç½‘æœåŠ¡å™¨ï¼Œåœ¨å±€åŸŸç½‘æœåŠ¡å™¨ä¸Šæ­å»º shadowsocks éš§é“ä»£ç†ï¼Œè®©æ¯å°ç”µè„‘é€šè¿‡è¿™å°å±€åŸŸç½‘æœåŠ¡å™¨ä¸Šç½‘ï¼Œå°±å¯ä»¥åªç”¨ä¸€ä¸ªè´¦å·å®žçŽ°å…¬å¸å‘˜å·¥é›†ä½“ç¿»å¢™æžäº‹æƒ…ã€‚ æ¡ä»¶ ä¸€ä¸ªèƒ½ç”¨çš„ shadowsocks æœåŠ¡è´¦å· ä¸€å°å†…ç½‘æœåŠ¡å™¨ï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯ centOS 7 å®‰è£… shadowsocks æœåŠ¡pipæ˜¯ python çš„åŒ…ç®¡ç†å·¥å…·ã€‚åœ¨æœ¬æ–‡ä¸­å°†ä½¿ç”¨ python ç‰ˆæœ¬çš„ shadowsocksï¼Œæ­¤ç‰ˆæœ¬çš„ shadowsocks å·²å‘å¸ƒåˆ° pip ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡ pip å‘½ä»¤æ¥å®‰è£…ã€‚ å®‰è£… pipåœ¨æŽ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… pipï¼š12curl "https://bootstrap.pypa.io/get-pip.py" -o "get-pip.py"python get-pip.py å®‰è£…é…ç½® shadowsocksåœ¨æŽ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… shadowsocksï¼š12pip install --upgrade pippip install shadowsocks å®‰è£…å®ŒæˆåŽï¼Œéœ€è¦åˆ›å»ºé…ç½®æ–‡ä»¶/etc/shadowsocks.jsonï¼Œå†…å®¹å¦‚ä¸‹ï¼š1234567891011&#123; &quot;server&quot;:&quot;1.1.1.1&quot;, #ssæœåŠ¡å™¨IP &quot;server_port&quot;:1035, #ssæœåŠ¡å™¨ç«¯å£ &quot;local_address&quot;: &quot;127.0.0.1&quot;, #æœ¬åœ°ip &quot;local_port&quot;:1080, #æœ¬åœ°ç«¯å£ &quot;password&quot;:&quot;password&quot;, #è¿žæŽ¥sså¯†ç  &quot;timeout&quot;:300, #ç­‰å¾…è¶…æ—¶ &quot;method&quot;:&quot;aes-256-cfb&quot;, #åŠ å¯†æ–¹å¼,å¯é€‰aes-128-cfb, aes-192-cfb, aes-256-cfb, bf-cfb, cast5-cfb, des-cfb, rc4-md5, chacha20, salsa20, rc4, table &quot;fast_open&quot;: false, # true æˆ– falseã€‚å¦‚æžœä½ çš„æœåŠ¡å™¨ Linux å†…æ ¸åœ¨3.7+ï¼Œå¯ä»¥å¼€å¯ fast_open ä»¥é™ä½Žå»¶è¿Ÿã€‚å¼€å¯æ–¹æ³•ï¼š echo 3 &gt; /proc/sys/net/ipv4/tcp_fastopen å¼€å¯ä¹‹åŽï¼Œå°† fast_open çš„é…ç½®è®¾ç½®ä¸º true å³å¯ &quot;workers&quot;: 1 # å·¥ä½œçº¿ç¨‹æ•°&#125; é…ç½®è‡ªå¯åŠ¨æ–°å»ºå¯åŠ¨è„šæœ¬æ–‡ä»¶/etc/systemd/system/shadowsocks.serviceï¼Œå†…å®¹å¦‚ä¸‹ï¼š1234567[Unit]Description=Shadowsocks[Service]TimeoutStartSec=0ExecStart=/usr/bin/sslocal -c /etc/shadowsocks.json[Install]WantedBy=multi-user.target æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ shadowsocks æœåŠ¡ï¼š12systemctl enable shadowsockssystemctl start shadowsocks æ£€æŸ¥ shadowsocks æœåŠ¡æ˜¯å¦å·²æˆåŠŸå¯åŠ¨1systemctl status shadowsocks -l Convert Shadowsocks into an HTTP proxyæˆ‘ä»¬è¦å°† socks æœåŠ¡è½¬ä¸º http å®žçŽ° http(s) ä»£ç† å®‰è£… polipoæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… polipo æœåŠ¡ï¼š12345wget https://www.irif.fr/~jch/software/files/polipo/polipo-1.1.1.tar.gztar -xf polipo-1.1.1.tar.gzcd polipo-1.1.1make allmake install é…ç½® polipo æœåŠ¡åˆ›å»ºé…ç½®æ–‡ä»¶å¤¹1mkdir /etc/polipo ä»Žæºç ç›®å½•æ‹·è´é…ç½®æ–‡ä»¶ï¼š1cp config.sample /etc/polipo/config å¯æ ¹æ®éœ€è¦é…ç½®é€‰é¡¹ åŽå°å¯åŠ¨æœåŠ¡1nohup polipo socksParentProxy=localhost:1080 &amp; æµ‹è¯•ä»£ç†æµ‹è¯•æŒ‚è½½çš„ä»£ç†æ˜¯å¦å¯ä»¥ä½¿ç”¨12export https_proxy=http://127.0.0.1:8123curl https://www.facebook.com è‹¥èƒ½æ‹‰å–é¡µé¢èµ„æºï¼Œåˆ™ä»£ç†æˆåŠŸ å±€åŸŸç½‘ä½¿ç”¨å±€åŸŸç½‘å†…çš„ç”µè„‘é€šè¿‡è®¾ç½®ç½‘ç»œä»£ç†æˆ‘çš„å†…ç½‘æœåŠ¡å™¨å†…ç½‘ ip æ˜¯ 192.168.1.18 win 10 ç›´æŽ¥åœ¨è®¾ç½®ä¸­å¸¦å¼€ç½‘ç»œè®¾ç½®ï¼Œæ·»åŠ æ‰‹åŠ¨ä»£ç†ï¼Œ åœ°å€ 192.168.1.18 ç«¯å£ 8123æ‰“å¼€æµè§ˆå™¨ä½¿ç”¨è°·æ­Œæœç´¢é©¬ä¸Šç¿»å¢™æžäº‹æƒ…]]></content>
      <tags>
        <tag>net</tag>
        <tag>shadowsocks</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[css3 åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–(1)]]></title>
    <url>%2F2017%2F01%2F23%2Fcss3-%E5%8A%A8%E7%94%BB%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96-1%2F</url>
    <content type="text"><![CDATA[åœ¨ä¼ ç»Ÿç½‘é¡µä¸ŠåŠ¨ç”»ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ Javascript æˆ– flash æ¥å®žçŽ°ï¼Œä½†æ˜¯ html5 çš„æ—¶ä»£çš„åˆ°æ¥ï¼ŒCSS çš„è¿›åŒ–ï¼Œè®©åŠ¨ç”»å®žçŽ°èµ·æ¥æ›´åŠ  easyã€‚ çŽ°ä»£çš„æµè§ˆå™¨é€šå¸¸ä¼šæœ‰ä¸¤ä¸ªé‡è¦çš„æ‰§è¡Œçº¿ç¨‹ï¼Œè¿™2ä¸ªçº¿ç¨‹ååŒå·¥ä½œæ¥æ¸²æŸ“ä¸€ä¸ªç½‘é¡µ ä¸»çº¿ç¨‹ åˆæˆçº¿ç¨‹ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸»çº¿ç¨‹è´Ÿè´£ï¼š è¿è¡Œ JavaScriptã€‚ è®¡ç®— HTML å…ƒç´ çš„ CSS æ ·å¼ã€‚ é¡µé¢çš„å¸ƒå±€ å°†å…ƒç´ ç»˜åˆ¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä½å›¾ä¸­ å°†è¿™äº›ä½å›¾äº¤ç»™åˆæˆçº¿ç¨‹ ç›¸åº”åœ°ï¼Œåˆæˆçº¿ç¨‹è´Ÿè´£ï¼š é€šè¿‡ GPU å°†ä½å›¾ç»˜åˆ¶åˆ°å±å¹•ä¸Š é€šçŸ¥ä¸»çº¿ç¨‹æ›´æ–°é¡µé¢ä¸­å¯è§æˆ–å³å°†å˜æˆå¯è§çš„éƒ¨åˆ†çš„ä½å›¾ è®¡ç®—å‡ºé¡µé¢ä¸­å“ªéƒ¨åˆ†æ˜¯å¯è§çš„ è®¡ç®—å‡ºå½“ä½ åœ¨æ»šåŠ¨é¡µé¢æ—¶å“ªéƒ¨åˆ†æ˜¯å³å°†å˜æˆå¯è§çš„ å½“ä½ æ»šåŠ¨é¡µé¢æ—¶å°†ç›¸åº”ä½ç½®çš„å…ƒç´ ç§»åŠ¨åˆ°å¯è§†åŒºåŸŸ Example width è¿‡æ¸¡æˆ‘ä»¬ç»˜åˆ¶ä¸€ä¸ªæ–°é—»å¡ç‰‡ï¼Œè®©å…¶åœ¨é¼ æ ‡ç§»ä¸Šæ—¶äº§ç”ŸåŠ¨ç”»ï¼Œä¸ºäº†èŠ‚çœæ—¶é—´ï¼Œcss é‡‡ç”¨ sass/scss ç¼–è¯‘ html ä»£ç ï¼š123456789101112&lt;div class="box"&gt; &lt;div class="img-box"&gt; &lt;img src="./images/baobao.jpeg" /&gt; &lt;/div&gt; &lt;div class="content"&gt; &lt;p&gt;hello world&lt;/p&gt; &lt;p&gt;hello world&lt;/p&gt; &lt;p&gt;hello world&lt;/p&gt; &lt;p&gt;hello world&lt;/p&gt; &lt;p&gt;hello world&lt;/p&gt; &lt;/div&gt;&lt;/div&gt; scss ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859.box &#123; width: 120px; box-shadow: 0 0 10px 0 #777; @include comic(.3); &amp;:hover &#123; -webkit-animation: box 1s forwards; .content &#123; -webkit-animation: content 1s forwards; -webkit-animation-delay: .5s; p &#123; -webkit-animation: p 1s forwards; -webkit-animation-delay: .5s; &#125; &#125; &#125; border-radius: 50%; overflow: hidden; .img-box &#123; width: 100%; img &#123; width: 100%; &#125; &#125; .content &#123; padding: 0; p &#123; height: 0; margin: 0; line-height: 20px; &#125; &#125;&#125;@keyframes box &#123; 0% &#123;&#125; 100% &#123; width: 200px; border-radius: 0; &#125;&#125;@keyframes content &#123; 0% &#123;&#125; 100% &#123; padding: 10px; &#125;&#125;@keyframes p &#123; 0% &#123;&#125; 100% &#123; height: 20px; margin: 1em 0; &#125;&#125;@mixin comic($time) &#123; -webkit-transition: #&#123;$time&#125;s ease-in-out; -moz-transition: #&#123;$time&#125;s ease-in-out; -ms-transition: #&#123;$time&#125;s ease-in-out; -o-transition: #&#123;$time&#125;s ease-in-out; transition: #&#123;$time&#125;s ease-in-out;&#125; é¼ æ ‡æ‚¬åœæ—¶ï¼Œä¼šäº§ç”Ÿå¦‚ä¸‹æ•ˆæžœ æ‰“å¼€ chrome æµè§ˆå™¨çš„ timeline è§‚çœ‹æ•´ä¸ªåŠ¨ç”»ç»˜åˆ¶æƒ…å†µ ä»Ž range å¯ä»¥çœ‹å‡º redering å’Œ painting æ‰€èŠ±è´¹çš„æ—¶é—´æƒ…å†µï¼Œæ•´ä¸ªåŠ¨ç”»ç¨³å®šåœ¨ 55-60 fps å·¦å³ã€‚è¿™æ˜¯åœ¨é…ç½®è¾ƒå¥½çš„ç¬”è®°æœ¬ä¸Šçš„æƒ…å†µï¼Œå°è¯•åœ¨è¾ƒä¸ºæ—§æ¬¾çš„è®¾å¤‡ä¸ŠæŸ¥çœ‹ï¼Œæœ‰æ—¶ä¼šé™ä¸º 40 fps å·¦å³ï¼Œç•¥æœ‰å¡é¡¿ã€‚ å®¹å™¨å®½åº¦ï¼ˆwidthï¼‰åŠ¨ç”»æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š å·¦çº¿ç¨‹ä¸ºä¸»çº¿ç¨‹ï¼Œå³çº¿ç¨‹ä¸ºåˆæˆçº¿ç¨‹ å¦‚å›¾æ‰€ç¤ºï¼Œæµè§ˆå™¨åœ¨è¿›è¡Œä¸€æ¬¡ css åŠ¨ç”»çš„æ—¶å€™ï¼Œéœ€è¦å°†åŠ¨ç”»è¿›è¡Œåˆ‡ç‰‡ï¼Œæ¯è¿›è¡Œä¸€æ¬¡å¸§è¿‡æ¸¡ï¼Œéƒ½éœ€è¦ä¸»çº¿ç¨‹ä¸Žåˆæˆçº¿ç¨‹è¿›è¡Œåè°ƒã€‚åœ¨åŠ¨ç”»çš„æ¯ä¸€å¸§ä¸­ï¼Œæµè§ˆå™¨éƒ½è¦æ‰§è¡Œå¸ƒå±€ã€ ç»˜åˆ¶ã€ ä»¥åŠå°†æ–°çš„ä½å›¾æäº¤ç»™ GPUã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå°†ä½å›¾åŠ è½½åˆ° GPU çš„å†…å­˜ä¸­æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ…¢çš„æ“ä½œã€‚ æµè§ˆå™¨éœ€è¦åšå¤§é‡å·¥ä½œçš„åŽŸå› åœ¨äºŽæ¯ä¸€å¸§ä¸­å…ƒç´ çš„å†…å®¹éƒ½åœ¨ä¸æ–­æ”¹å˜ã€‚æ”¹å˜ä¸€ä¸ªå…ƒç´ çš„é«˜åº¦å¯èƒ½å¯¼è‡´éœ€è¦åŒæ­¥æ”¹å˜å®ƒçš„å­å…ƒç´ çš„å¤§å°ï¼Œæ‰€ä»¥æµè§ˆå™¨å¿…é¡»é‡æ–°è®¡ç®—å¸ƒå±€ã€‚å¸ƒå±€å®ŒæˆåŽï¼Œä¸»çº¿ç¨‹åˆå¿…é¡»é‡æ–°ç”Ÿæˆè¯¥å…ƒç´ çš„ä½å›¾ã€‚æµè§ˆå™¨éœ€è¦åšå¤§é‡çš„å·¥ä½œï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªåŠ¨ç”»å¯èƒ½ä¼šå˜å¾—å¡é¡¿ã€‚ scale è¿‡æ¸¡å°† width çš„æ•°å€¼è¿‡æ¸¡æ”¹æˆç¼©æ”¾è¿‡æ¸¡1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253.box &#123; width: 200px; box-shadow: 0 0 10px 0 #777; @include comic(.3); -webkit-transform: scale(.6); &amp;:hover &#123; -webkit-animation: box 1s forwards; .content &#123; -webkit-animation: content 1s forwards; -webkit-animation-delay: .5s; p &#123; -webkit-animation: p 1s forwards; -webkit-animation-delay: .5s; &#125; &#125; &#125; border-radius: 50%; overflow: hidden; .img-box &#123; width: 100%; img &#123; width: 100%; &#125; &#125; .content &#123; padding: 0; p &#123; height: 0; margin: 0; line-height: 20px; &#125; &#125;&#125;@keyframes box &#123; 0% &#123;&#125; 100% &#123; -webkit-transform: scale(1); border-radius: 0; &#125;&#125;@keyframes content &#123; 0% &#123;&#125; 100% &#123; padding: 10px; &#125;&#125;@keyframes p &#123; 0% &#123;&#125; 100% &#123; height: 20px; margin: 1em 0; &#125;&#125; åŒæ ·æ‰“å¼€ chrome æµè§ˆå™¨çš„ timeline è§‚çœ‹æ•´ä¸ªåŠ¨ç”»ç»˜åˆ¶æƒ…å†µ ä¼šå‘çŽ° rendering å’Œ painting çš„æ—¶é—´éƒ½ç¼©çŸ­äº†ã€‚ åŒæ—¶åœ¨æ—¶é—´è½´ä¸Šå¯ä»¥çœ‹åˆ°æœ€å¤§å¯ä»¥è¾¾åˆ° 90 å‡  fpsï¼ˆæœ‰æ—¶å¯ä»¥è¾¾åˆ°100ä»¥ä¸Šï¼‰ å®¹å™¨å®½åº¦ï¼ˆwidthï¼‰åŠ¨ç”»æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å°‘äº†å¾ˆå¤šä¸»çº¿æˆä¸Žåˆæˆçº¿ç¨‹ä¹‹é—´çš„äº¤æ¢ï¼Œæ„å‘³ç€åŠ¨ç”»å˜å¾—æ›´æµç•…äº†ã€‚ åŽŸå› æ ¹æ®å®šä¹‰ï¼ŒCSS çš„transformå±žæ€§ä¸ä¼šæ›´æ”¹å…ƒç´ æˆ–å®ƒå‘¨å›´çš„å…ƒç´ çš„å¸ƒå±€ã€‚transformå±žæ€§ä¼šå¯¹å…ƒç´ çš„æ•´ä½“äº§ç”Ÿå½±å“ï¼Œå®ƒä¼šå¯¹æ•´ä¸ªå…ƒç´ è¿›è¡Œç¼©æ”¾ã€æ—‹è½¬ã€ç§»åŠ¨å¤„ç†ã€‚ è€Œæ”¹å˜ width, height, maigin ç­‰å±žæ€§çš„æ—¶å€™ï¼Œä¼šé€ æˆå…ƒç´ å¸ƒå±€çš„é‡æŽ’è€Œè§¦å‘é‡ç»˜ï¼Œå½±å“ gpu çš„çº¿æ€§è®¡ç®—ã€‚ è¿™åªæ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„åŠ¨ç”»å®žä¾‹ï¼Œå¯¹æ¯”æƒ…å†µå¹¶ä¸æ˜Žæ˜¾ï¼Œåœ¨æ¶‰åŠå†…è¿žå…ƒç´ è¾ƒå¤šçš„åŠ¨ç”»åŒæ—¶è¿›è¡Œæ—¶ï¼Œå¯¹æ¯”ä¼šæ›´ä¸ºçªå‡ºã€‚ æœ€åŽè¿›è¡Œç”¨ä»¥ä¸‹å±žæ€§æ¥åš css åŠ¨ç”» CSS transform CSS opacity CSS filterï¼ˆå–å†³äºŽfilterçš„å¤æ‚åº¦ä»¥åŠæµè§ˆå™¨çš„å®žçŽ°ï¼‰é¿å…ä½¿ç”¨ height,width,margin,padding ç­‰ï¼›]]></content>
      <tags>
        <tag>css</tag>
        <tag>css3</tag>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS3 border-radius]]></title>
    <url>%2F2017%2F01%2F18%2FCSS3-border-radius%2F</url>
    <content type="text"><![CDATA[æ—©äº›å¹´CSS3 border-radius çš„æ–‡æ¡£æˆ–è€…æ–‡ç« ï¼Œä¼šå‘çŽ°ï¼Œæ ¹æœ¬å°±æ²¡æœ‰æè¿‡ç™¾åˆ†æ¯”å€¼è¿™ä¸€èŒ¬ã€‚ç©¶å…¶åŽŸå› ï¼Œæ˜¯å› ä¸ºç™¾åˆ†æ¯”å€¼çš„æ”¯æŒæ˜¯åŽæ¥æ‰æ”¯æŒçš„ï¼Œè·Ÿæ•°å€¼ä¸æ˜¯ä¸€èµ·å‡ºæ¥çš„ã€‚æ¯”æ–¹è¯´æŸäº›è€ç‰ˆæœ¬çš„ Android æœºå­ï¼Œborder-radius:50% å®ƒå°±ä¸è®¤è¯†ã€‚ æ—©æœŸæµè§ˆå™¨æ”¯æŒ border-radius éƒ½æ˜¯æµè§ˆå™¨æ ‡å‡†å®žçŽ°ï¼Œå¹¶ä¸å½¢æˆç»Ÿä¸€æ ‡å‡†ã€‚å…¼å®¹æ—§ç‰ˆæœ¬æµè§ˆå™¨éœ€è¦ç”¨åˆ°æµè§ˆå™¨å†…æ ¸å‰ç¼€ -webkit-border-radius, -moz-border-radiusã€‚æµè§ˆå™¨ä¸ªæŠŠå¹´å‰å°±æŠŠç§æœ‰å‰ç¼€ç»™åŽ»æŽ‰äº†ï¼ŒçŽ°åœ¨å®Œå…¨æ²¡å¿…è¦ä½¿ç”¨ã€‚ ä½œç”¨border-radius æ˜¯å‘å—çº§å…ƒç´ æ·»åŠ åœ†è§’è¾¹æ¡†ã€‚ åŽŸç†æ—¢ç„¶æ˜¯æ·»åŠ åœ†è§’è¾¹æ¡†ï¼Œé‚£ä¹ˆåœ†è§’è¾¹æ¡†æ˜¯æ€Žä¹ˆè¢«ç¡®å®šå‡ºæ¥çš„ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šã€‚ é¦–å…ˆç¡®å®šåœ†è§’è¾¹æ¡†å…¶å®žå°±æ˜¯ä¸€ä¸ªå¼§è¾¹ã€‚ä¸€ä¸ªæ ‡å‡†çš„åœ†è§’å¼§è¾¹æ˜¯ç”±åœ†è£åˆ‡å‡ºæ¥çš„ã€‚åœ†çš„åŠå¾„å†³å®šäº†åœ†çš„å¤§å°ï¼Œä¹Ÿå°±å†³å®šäº†å¼§è¾¹è£å‰ªå‡ºæ¥çš„å¼§é•¿å’Œå¼§åº¦ã€‚ border-radius ç»å¯¹æ•°å€¼border-radius çš„å€¼æ˜¯ç»å¯¹åƒç´ æ•°å€¼ apx(pxæ˜¯å•ä½åƒç´ ) çš„æ—¶å€™ï¼Œåˆ‡å‡ºæ¥çš„å¼§è¾¹æ­£å¥½æ˜¯ä¸€ä¸ªä»¥ apx ä¸ºåŠå¾„çš„åœ†çš„ 1/4 åœ†è§’å¼§è¾¹ã€‚ ä¾‹å¦‚ï¼Œä¸€ä¸ªå®½é«˜ä¸º 200px çš„æ­£æ–¹å½¢ divï¼Œ è®¾ç½® 50px çš„ border-radiusï¼Œåœ†è§’è¾¹æ¡†å°±æ˜¯ 50px ä¸ºåŠå¾„çš„åœ†çš„ 1/4 åœ†è§’å¼§è¾¹1234567891011121314&lt;style&gt;.square&#123; width: 200px; height:200px; border: 1px solid #000; margin-right: 100px; display:inline-block&#125;.radius&#123; border-radius: 50px;&#125;&lt;/style&gt;&lt;div class='square'&gt;&lt;/div&gt;&lt;div class='square radius'&gt;&lt;/div&gt; å½“ apx ä¸ºæ­£æ–¹å½¢ div è¾¹é•¿çš„ä¸€åŠæ—¶ï¼Œdiv æ­£å¥½æ˜¯ä¸€ä¸ªæ­£åœ†123.radius&#123; border-radius: 100px;&#125; apx çš„æœ€å¤§å€¼æ˜¯å…ƒç´ è¾¹é•¿çš„ä¸€åŠ, å½“ apx è¶…è¿‡ä¸€åŠæ—¶ï¼Œå°†è‡ªåŠ¨å–è¾¹é•¿çš„ä¸€åŠ123.radius&#123; border-radius: 150px;&#125; å¦‚æžœ div æ˜¯ä¸€ä¸ªé•¿æ–¹å½¢ï¼Œé‚£ä¹ˆ border-radius çš„å–å€¼æœ€å¤§æ˜¯æœ€çŸ­è¾¹çš„ä¸€åŠ1234567891011121314&lt;style&gt;.square&#123; width: 400px; height:200px; border: 1px solid #000; margin-right: 100px; display:inline-block&#125;.radius&#123; border-radius: 150px;&#125;&lt;/style&gt;&lt;div class='square'&gt;&lt;/div&gt;&lt;div class='square radius'&gt;&lt;/div&gt; 1234567.square&#123; width: 200px; height:400px; border: 1px solid #000; margin-right: 100px; display:inline-block&#125; border-radius ç™¾åˆ†æ¯”å€¼çŽ°ä»£æµè§ˆå™¨ä¸º border-radius åŠ å…¥äº†åŠåˆ†æ¯”å€¼çš„æ”¯æŒã€‚åŠåˆ†æ¯”å€¼ç”Ÿæˆçš„åœ†è§’è¾¹æ¡†ï¼Œæ˜¯ä»Žå…ƒç´ é¡¶ç‚¹å¤„ï¼Œå¾€ä¸¤ä¸ªé‚»è¾¹å–å‡ºè¾¹é•¿çš„ä¸€åŠçš„åŠåˆ†æ¯”é•¿åº¦æ‰€ç¡®å®šçš„æ¤­åœ†çš„ 1/4 å¼§è¾¹é¦–å…ˆæˆ‘ä»¬äº†è§£ï¼Œæ ‡å‡†æ¤­åœ†çš„ç¡®å®šæ¦‚å¿µ æ¤­åœ†ï¼ˆEllipseï¼‰æ˜¯å¹³é¢å†…åˆ°å®šç‚¹F1ã€F2çš„è·ç¦»ä¹‹å’Œç­‰äºŽå¸¸æ•°ï¼ˆå¤§äºŽ|F1F2|ï¼‰çš„åŠ¨ç‚¹Pçš„è½¨è¿¹ï¼ŒF1ã€F2ç§°ä¸ºæ¤­åœ†çš„ä¸¤ä¸ªç„¦ç‚¹ã€‚å…¶æ•°å­¦è¡¨è¾¾å¼ä¸ºï¼š|PF1|+|PF2|=2aï¼ˆ2a&gt;|F1F2|ï¼‰ã€‚ 1234567891011121314&lt;style&gt;.square&#123; width: 200px; height:200px; border: 1px solid #000; margin-right: 100px; display:inline-block&#125;.radius&#123; border-radius: 20%;&#125;&lt;/style&gt;&lt;div class='square'&gt;&lt;/div&gt;&lt;div class='square radius'&gt;&lt;/div&gt; F1, F2 çš„ä½ç½®æ˜¯æµè§ˆå™¨ç»™å‡ºï¼Œå› æ­¤å¾ˆéš¾è¯´å…¶åˆ‡é¢å¼§è§’çš„å¤§å°ã€‚ ç™¾åˆ†æ¯”å€¼æœ€å¤§å–åˆ° 50%ï¼Œå³ä¸ºå„è¾¹ä¸€åŠï¼Œè¶…è¿‡ 50% æŒ‰ç…§ 50%è®¡ç®—ã€‚123.radius&#123; border-radius: 50%;&#125; 123.radius&#123; border-radius: 80%;&#125; å¤šä¸ªå‚æ•°border-radius æ”¯æŒä¼ å…¥å¤šä¸ªå‚æ•°è¿›è¡Œè®¾ç½®åœ†è§’è¾¹æ¡†ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°æ—¶è¡¨ç¤º4ä¸ªè§’çš„åœ†è§’æ˜¯ä¸€æ ·çš„ï¼Œå¤šä¸ªå‚æ•°æ—¶å³ä¸ºæ¯ä¸ªè§’å•ç‹¬è®¾ç½®ï¼Œé¡ºåºæ˜¯ï¼šå·¦ä¸Šï¼Œå³ä¸Šï¼Œå³ä¸‹ï¼Œå·¦ä¸‹1234567891011121314&lt;style&gt;.square&#123; width: 200px; height:200px; border: 1px solid #000; margin-right: 100px; display:inline-block&#125;.radius&#123; border-radius: 10px 20px 20px 20%;&#125;&lt;/style&gt;&lt;div class='square'&gt;&lt;/div&gt;&lt;div class='square radius'&gt;&lt;/div&gt; ;]]></content>
      <tags>
        <tag>css</tag>
        <tag>css3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[çº¦ç‘Ÿå¤«çŽ¯çš„æ€è€ƒ]]></title>
    <url>%2F2017%2F01%2F11%2F%E7%BA%A6%E7%91%9F%E5%A4%AB%E7%8E%AF%E7%9A%84%E6%80%9D%E8%80%83%2F</url>
    <content type="text"><![CDATA[åŸºæœ¬æ€è·¯é¦–å…ˆåˆ›å»ºä¸€ä¸ª 1ï½ž100 çš„æ•°ç»„ã€‚12345678910[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100] æ¯éš” 7 å–ä¸€ä¸ªæ•°ï¼Œå‰”é™¤ï¼Œç¬¬ä¸€æ¬¡è¢«å‰”é™¤çš„æ•°å°±æ˜¯1[7,14,21,28,35,42,49,56,63,70,77,84,91,98] å‰©ä¸‹çš„æ•°æŽ’åˆ—æˆæ–°çš„æ•°ç»„12345678910[1,2,3,4,5,6,8,9,10,11,12,13,15,16,17,18,19,20,22,23,24,25,26,27,29,30,31,32,33,34,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,57,58,59,60,61,62,64,65,66,67,68,69,71,72,73,74,75,76,78,79,80,81,82,83,85,86,87,88,89,90,92,93,94,95,96,97,99,100] å‰”é™¤æŽ‰çš„æœ€åŽä¸€ä¸ªæ•° 98ï¼Œå¾€åŽè¿˜å‰© 99ï¼Œ100 ä¸¤ä¸ªæ•°ï¼Œåœ¨æ–°çš„æ•°ç»„é‡Œï¼Œè¦æŽ’åˆ°å¤´é‡Œç»§ç»­ç®—ï¼Œå› æ­¤æ–°æ•°ç»„æ¯ä¸ªå…ƒç´ çš„æ¸¸æ ‡éƒ½è¢«å‰ç½®äº† 2ï¼ˆå› ä¸ºç¬¬ä¸€æ¬¡å¾ªçŽ¯è¿˜å‰©2ä¸ªæ•°æ²¡ç®—ï¼‰,æ‰€ä»¥åœ¨æ–°æ•°ç»„é‡Œä»Žç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è®¡ç®—æ—¶ï¼Œæ¯ä¸ªå…ƒç´ çš„æ¸¸æ ‡éƒ½åŠ  2ï¼Œ ç¬¬äºŒæ¬¡è¢«å‰”é™¤çš„æ•°å°±æ˜¯1[20,26,39,50,64,82,85] æ­¤æ—¶å‰”é™¤æŽ‰æœ€åŽä¸€ä¸ªæ•°æ—¶ï¼Œè¿˜å‰© 85 æœªè¢«è®¡ç®—ï¼Œæ¸¸æ ‡å‰ç½®äº† 1ï¼Œç»§ç»­å¾ªçŽ¯123456[20,26,39,50,64,85] ~1[20,26,39,50,64] ~0[20,39,50,64] ~3[20,39,50] ~0[39,50] ~2[50] å¾€åŽç»§ç»­æŽ’é™¤åˆ°åªå‰©ä¸€ä¸ªæ•° [50] ç¨‹åºè®¾è®¡å®šä¹‰ä¸€ä¸ª 100 çš„æ•°ç»„1var array = Array.from(&#123;length:100&#125;).map((item,i)=&gt;&#123;return i+1;&#125;); æ¯éš” 7 ä¸ªæ•°å‰”é™¤ï¼Œå…¶å®žå°±æ˜¯å°†æ¸¸æ ‡(i)èƒ½æ•´é™¤ 7 çš„å…ƒç´ å‰”é™¤ï¼Œå› ä¸ºæ•°ç»„çš„èµ·å§‹æ¸¸æ ‡æ˜¯ 0ï¼Œæ‰€ä»¥å®žé™…è®¡ç®—æ—¶ï¼Œæ¸¸æ ‡åº”è¯¥æ˜¯(i+1),å®šä¹‰æ¯æ¬¡çš„èµ·å§‹åŸºç‚¹ä¸º left,æ¯æ¬¡å¾ªçŽ¯è®¡ç®—åŽéƒ½å‰©ä½™å‡ ä¸ªæ•°æœªè®¡ç®—ï¼Œå‰©ä½™çš„å…ƒç´ ä¸ªæ•°ä½œä¸ºæ–°çš„åŸºç‚¹ï¼Œæ‰€ä»¥è®¡ç®—åŽçš„å®žé™…æ¸¸æ ‡å°±æ˜¯(i+1+left),åˆå§‹åŒ–åŸºç‚¹ left ä¸º 0,æ­¥é•¿ step ä¸º 71var left = 0, step = 7; æ¯æ¬¡éåŽ†åŽå‰”é™¤æŽ‰æ»¡è¶³æ¸¸æ ‡çš„å…ƒç´ åŽï¼Œç”Ÿæˆæ–°çš„æ•°ç»„ï¼Œç®—ä¸ŠåŸºç‚¹é‡æ–°éåŽ†è¿­ä»£ï¼Œç›´åˆ°åªå‰© 1 ä¸ªå…ƒç´ 123456789101112131415161718var array = Array.from(&#123;length:100&#125;).map((item,i)=&gt;&#123;return i+1;&#125;);var left = 0, step = 7;function goal(left, s, arr)&#123; console.log(arr); // æ‰“å°æ¯æ¬¡çš„èµ·å§‹æ•°ç»„ let length = arr.length // æ•°ç»„é•¿åº¦ if(length == 1) return console.log(arr); // å½“åªå‰© 1 ä¸ªå…ƒç´ æ—¶ï¼Œåœæ­¢è®¡ç®— let ar = arr.filter((item, i)=&gt;&#123; return (i+1+left)%s != 0; // å–å‡ºæ»¡è¶³æ¸¸æ ‡çš„å…ƒç´  &#125;); let dar = arr.filter((item, i)=&gt;&#123; return (i+1+left)%s == 0; // å–å‡ºæ»¡è¶³æ¸¸æ ‡ä¸Žæ­¥é•¿å–æ¨¡ä¸º 0 çš„å…ƒç´  &#125;); left += length-s*(length-ar.length); // å¾—åˆ°æ–°çš„åŸºç‚¹ console.log(dar); // æ‰“å°è¢«å‰”é™¤æŽ‰çš„å…ƒç´  console.log(left); // æ‰“å°æ–°çš„åŸºç‚¹ goal(left, s, ar); // å°†æ–°çš„åŸºç‚¹å’Œæ–°çš„æ•°ç»„è¿­ä»£è®¡ç®—&#125;goal(left, step, array);]]></content>
      <tags>
        <tag>idea</tag>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ‰‹åŠ¨å®žçŽ°ç®€å•æ¨¡ç‰ˆæ•°æ®ç»‘å®š]]></title>
    <url>%2F2016%2F12%2F29%2F%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E6%A8%A1%E7%89%88%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%2F</url>
    <content type="text"><![CDATA[MVVMæ˜¯Model-View-ViewModelçš„ç®€å†™, ä¸»è¦ç›®çš„æ˜¯åˆ†ç¦»è§†å›¾ï¼ˆViewï¼‰å’Œæ¨¡åž‹ï¼ˆModelï¼‰ã€‚ mvvm æ¡†æž¶æ˜¯æ—¶ä¸‹çƒ­ç‚¹çš„å‰ç«¯è®¨è®ºè¯é¢˜ï¼Œé€šè¿‡åˆ†ç¦» è§†å›¾ å’Œ æ¨¡åž‹ï¼Œç®€åŒ–å¼€å‘æµç¨‹ï¼Œæé«˜å¼€å‘æ•ˆçŽ‡ã€‚ mvvm çš„æ¨¡ç‰ˆå¼•æ“Žï¼Œé€šè¿‡æ•°æ®åŒå‘ç»‘å®šï¼Œå®žçŽ° View-Model, Model-View ä¹‹é—´çš„æ•°æ®æ›´æ–°ã€‚ æœ¬èŠ‚å…ˆä»‹ç»å¦‚ä½•å…ˆå®žçŽ°ç®€å•æ¨¡ç‰ˆå¼•æ“Žä»¥åŠæ•°æ®ç»‘å®šã€‚ å®šä¹‰æ¨¡ç‰ˆ1234&lt;div id='demo'&gt; &lt;p&gt;hello &#123;&#123;name&#125;&#125;&lt;/p&gt; &lt;p&gt;this page is init on &lt;span class=&#123;&#123;color&#125;&#125;&gt;&#123;&#123;date&#125;&#125; !!!!!!&lt;/span&gt;&lt;/p&gt;&lt;/div&gt; æˆ‘ä»¬é€šè¿‡ æ¥å®šä¹‰æ¨¡ç‰ˆä¸­éœ€è¦æ›¿æ¢çš„å˜é‡ã€‚ å®šä¹‰æ¨¡ç‰ˆé©±åŠ¨123function MVVM(ele)&#123; this.dom = document.querySelector(ele);&#125; éåŽ†æ¨¡ç‰ˆå®šä¹‰æ–¹æ³•ï¼ŒéåŽ†æ¨¡ç‰ˆä¸­çš„å±žæ€§ï¼Œä»¥åŠå­èŠ‚ç‚¹åŠå…¶å±žæ€§ï¼Œæå–å‡ºéœ€è¦æ›¿æ¢çš„å˜é‡12345678910111213141516171819202122232425262728293031323334353637383940414243444546MVVM.prototype = &#123; /** * éåŽ†ä¼ å…¥çš„èŠ‚ç‚¹æˆ–å±žæ€§é›†åˆ */ each(dom, cb)&#123; Array.prototype.forEach.call(dom, function(item, index)&#123; cb.call(item, index, item); &#125;); &#125;, /** * å¼€å¯æ¨¡ç‰ˆæ›¿æ¢ */ renderDom(dom)&#123; var self = this; self.each(dom.attributes, function()&#123; self.render(this); &#125;); self.each(dom.childNodes, function() &#123; if (this.nodeType == 1) return self.renderDom(this); self.render(this); &#125;); &#125;, /** * æ›¿æ¢ èŠ‚ç‚¹ */ render(node) &#123; var self = this; var result = node.textContent; var keys = node.textContent.match(/\&#123;\&#123;\w+\&#125;\&#125;/g); if (!keys) return; var model = self.model; keys.map(item =&gt; &#123; return item.replace(/(\&#123;\&#123;|\&#125;\&#125;)/g, ''); &#125;).forEach(key =&gt; &#123; result = result.replace(`&#123;&#123;$&#123;key&#125;&#125;&#125;`, model[key] || ''); &#125;); node.textContent = result; &#125;, /** * æ‰§è¡Œå…¥å£ */ init()&#123; var self = this; self.renderDom(self.dom); &#125;&#125; æ•´åˆé€šè¿‡ MVVM å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ¸²æŸ“å‡ºæœ€åˆå®šä¹‰çš„ demoï¼Œä»£ç å¦‚ä¸‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8" /&gt; &lt;title&gt;mvvm test&lt;/title&gt; &lt;style type="text/css"&gt; .blue &#123; color: blue; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div id='mvvm'&gt; &lt;p&gt;hello &#123;&#123;name&#125;&#125;&lt;/p&gt; &lt;p&gt;this page init on &lt;span class="&#123;&#123;color&#125;&#125;"&gt;&#123;&#123;date&#125;&#125; !!!!!&lt;/span&gt;&lt;/p&gt; &lt;/div&gt; &lt;script&gt; function MVVM(ele) &#123; this.dom = document.querySelector(ele); &#125; MVVM.prototype = &#123; init() &#123; var self = this; self.renderDom(self.dom); &#125;, renderDom(dom) &#123; var self = this; self.each(dom.attributes, function() &#123; self.render(this); &#125;); self.each(dom.childNodes, function() &#123; if (this.nodeType == 1) return self.renderDom(this); self.render(this); &#125;); &#125;, each(dom, cb) &#123; Array.prototype.forEach.call(dom, function(item, index) &#123; cb.call(item, index, item); &#125;); &#125;, render(node) &#123; var self = this; var result = node.textContent; var keys = node.textContent.match(/\&#123;\&#123;\w+\&#125;\&#125;/g); if (!keys) return; var model = self.model; keys.map(item =&gt; &#123; return item.replace(/(\&#123;\&#123;|\&#125;\&#125;)/g, ''); &#125;).forEach(key =&gt; &#123; result = result.replace(`&#123;&#123;$&#123;key&#125;&#125;&#125;`, model[key] || ''); &#125;); node.textContent = result; &#125; &#125; var mvvm = new MVVM('#demo'); mvvm.model = &#123; name: 'world', date: new Date(), color: 'blue' &#125;; mvvm.init(); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æ•ˆæžœæ›¿æ¢å‰æ›¿æ¢åŽ]]></content>
      <tags>
        <tag>javascript</tag>
        <tag>mvvm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javascript(2) æ•°æ®ç±»åž‹(2)]]></title>
    <url>%2F2016%2F12%2F22%2Fjavascript-2-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2%2F</url>
    <content type="text"><![CDATA[ObjectObject ç±»åž‹æ˜¯ä¸€ç§å¼•ç”¨æ•°æ®ç±»åž‹ã€‚å®ƒæŒ‡å‘å†…å­˜ä¸­è¢«æ ‡è¯†å¼•ç”¨çš„ä¸€ä¸ªåŒºå—ã€‚ä¸ºä¸€ä¸ªå˜é‡èµ‹äºˆä¸€ä¸ªå¼•ç”¨ç±»åž‹æ•°æ®ï¼Œå˜é‡å°†æŒ‡å‘æ”¹å¼•ç”¨æ•°æ®çš„åŽŸå§‹å€¼ï¼Œè€Œä¸åˆ›å»ºå‰¯æœ¬ã€‚ ä¸åŒäºŽå­—ç¬¦ä¸²çš„å€¼ç±»åž‹ã€‚å­—ç¬¦ä¸²åœ¨èµ‹å€¼æ—¶ï¼Œä¼šåˆ›å»ºå‰¯æœ¬ï¼Œå…·ä½“æƒ…å†µï¼š12345var a = 'hello';var b = a;b += ' world';console.log(a); // helloconsole.log(b); // hello world å€¼ç±»åž‹æ•°æ®ä¸º b åˆ›å»ºäº†å‰¯æœ¬ï¼Œb çš„å€¼æ”¹å˜åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œä¸æ”¹å˜ a çš„åŽŸå§‹å€¼ åŒºåˆ«äºŽObject12345var a = &#123; a: 'hello' &#125;;var b = a;b.b = 'world';console.log(a); // &#123; a: 'hello', b: 'world' &#125;console.log(b); // &#123; a: 'hello', b: 'world' &#125; å¼•ç”¨ç±»åž‹æ•°æ®ï¼Œ var b = a æ˜¯å°† a çš„å¼•ç”¨ä¼ ç»™ bï¼Œ a, b æŒ‡å‘åŒä¸€ä¸ªå†…å­˜å¼•ç”¨åŒºå—ï¼Œæ”¹å˜ b çš„æ•°æ®å®žé™…ä¸Šæ˜¯æ”¹å˜å†…å­˜ä¸­æŒ‡å‘çš„åŒºå—æ‰€å­˜å‚¨çš„å†…å®¹ï¼Œå› æ­¤ a å¼•ç”¨åˆ°çš„æ•°æ®ä¹Ÿè·Ÿç€æ”¹å˜ã€‚ å¼•ç”¨æ•°æ®æ¯”è¾ƒ1234var a = &#123; a: 'hello world' &#125;;var b = a;a == b; // truea === b; // true å› ä¸º b æ˜¯ä½¿ç”¨äº† a çš„å¼•ç”¨ï¼Œaï¼Œb æŒ‡å‘å†…å­˜çš„åŒä¸€åŒºå—ï¼Œæ‰€ä»¥ a è·Ÿ b æ˜¯ç­‰ä»·çš„ã€‚ä½†æ˜¯1234var a = &#123; a: 'hello world' &#125;;var b = &#123; a: 'hello world' &#125;;a == b; // falsea === b; // false åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ Object æ•°æ®ç»™ bï¼Œè™½ç„¶ aï¼Œb çš„å­—é¢é‡æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ a ä¸Ž b å…·æœ‰ä¸åŒçš„å¼•ç”¨ï¼Œå¯¹äºŽå¼•ç”¨æ•°æ®çš„æ¯”è¾ƒï¼Œå®žé™…æ˜¯æ˜¯æ¯”è¾ƒå®ƒä»¬çš„å¼•ç”¨ã€‚ å¼•ç”¨æ•°æ®å˜é‡å®žé™…ä¸Šåªä¿å­˜äº†å¼•ç”¨çš„å†…å­˜æŒ‡é’ˆï¼Œä½¿ç”¨æ—¶ï¼Œæ˜¯ä»ŽæŒ‡é’ˆä¸­å¾€å†…å­˜æ£€ç´¢æ•°æ®ã€‚å³ä½¿å­—é¢é‡ä¸€æ ·ï¼Œä½†æ˜¯å¼•ç”¨ä¸åŒï¼Œå˜é‡å°±ä¸æ˜¯ç­‰ä»·çš„ã€‚ propertyå¯¹è±¡è¢«çœ‹ä½œæ˜¯ä¸€ç»„å±žæ€§çš„é›†åˆï¼ŒECMAScriptå®šä¹‰çš„å¯¹è±¡ä¸­æœ‰ä¸¤ç§å±žæ€§ï¼šæ•°æ®å±žæ€§å’Œè®¿é—®å™¨å±žæ€§ã€‚ æ•°æ®å±žæ€§æ˜¯é”®å€¼å¯¹ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°æ®å±žæ€§æ‹¥æœ‰ä¸‹åˆ—ç‰¹æ€§: [Value]] [[Writable]] [[Enumerable]] [[Configurable]] ä¸€ä¸ª Object å¯¹è±¡æ˜¯ä¸€ç»„é”®å€¼å¯¹çš„é›†åˆï¼Œé”®å’Œå€¼ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œé”®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„æ•°æ®ç±»åž‹ã€‚ function æ˜¯ä¸€ä¸ªé™„å¸¦å¯è¢«è°ƒç”¨åŠŸèƒ½çš„ç‰¹æ®Šå¯¹è±¡ javascriptä¸­ï¼Œå¾ˆå¤šåŽŸåž‹å¯¹è±¡æ•°æ®ç±»åž‹ï¼Œéƒ½æ˜¯åŸºäºŽ Object çš„æ´¾ç”Ÿï¼Œå¦‚ï¼šDate, Array, Map, WeakMap ç­‰ã€‚ Arrayæ•°ç»„æ˜¯é€šè¿‡æ•´æ•°æ ‡è¯†é”®ï¼Œå¹¶ä¸Žé•¿åº¦è¿›è¡Œå†…è”çš„å¸¸è§„å¯¹è±¡ã€‚é”®ä½œä¸ºæ•°ç»„çš„æ¸¸æ ‡ï¼Œä¸Žå­—ç¬¦ä¸²çš„ç´¢å¼•ç±»ä¼¼ã€‚ é€šè¿‡äº†è§£æ•°ç»„çš„æž„æˆï¼Œå¯ä»¥æ¨¡æ‹Ÿå‡ºæ•°ç»„çš„æ•°æ®ç»“æž„ã€‚ *æ³¨æ„ï¼Œarguments åœ¨ javascript ä¸­ï¼Œå‡½æ•°çš„ä¼ å‚è¢«ä¿å­˜åœ¨ arguments å¯¹è±¡ä¸­ï¼Œarguments æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œå¹¶éžæ˜¯æ•°ç»„ã€‚å®ƒå’Œæ•°ç»„ä¸€æ ·ï¼Œå…·æœ‰æ•´æ•°æœ‰åºæ¸¸æ ‡ï¼Œå’Œé•¿åº¦å…³ç³»ã€‚12345function x()&#123; console.log(arguments); // æ‰§è¡Œåˆ°è¿™é‡Œä¼šè¾“å‡º Arguments[1, 2] arguments.push(3); // Uncaught TypeError: arguments.push is not a function&#125;x(1, 2); å±•å¼€ Arguments[1, 2]ï¼Œå¯ä»¥çœ‹åˆ°å®ƒçš„æ•°æ®ç»“æž„æ˜¯ä¸€ä¸ªæ•´æ•°æ¸¸æ ‡é”®ï¼Œå¹¶å…·æœ‰ lengthã€‚ä¸Žæ•°ç»„ç»“æž„ç›¸ä¼¼ã€‚ä½†å¹¶ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥ä¸å…·å¤‡æ•°ç»„çš„æ–¹æ³•ã€‚ javascript å¯ä»¥é€šè¿‡ call å’Œ apply æ–¹æ³•ç»§æ‰¿ã€‚12345function x()&#123; Array.prototype.push.call(arguments, 3) console.log(arguments); // æ‰§è¡Œåˆ°è¿™é‡Œä¼šè¾“å‡º Arguments[1, 2, 3]&#125;x(1, 2); æž„å»ºä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ 1234var a = &#123; 0: 'a', 1: 'b', 2: 'c', length: 3 &#125;;Array.prototype.forEach.call(a, function(value, index)&#123; console.log(value,',',index); // ä¼šä¾æ¬¡è¾“å‡º a, 0 b, 1 c, 2&#125;);]]></content>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javascript(1) æ•°æ®ç±»åž‹(1)]]></title>
    <url>%2F2016%2F12%2F22%2Fjavascript-1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-1%2F</url>
    <content type="text"><![CDATA[ECMAScript å®šä¹‰äº†7ç§æ ‡å‡†çš„æ•°æ®ç±»åž‹ 6ç§åŸºæœ¬æ•°æ®ç±»åž‹ Boolean Null Undefined Number String Symbol (es6 æ ‡å‡†æ–°å¢ž) 1ç§ç‰¹æ®Šæ•°æ®ç±»åž‹ Object åŽŸå§‹å€¼é™¤äº† Object ä»¥å¤–çš„æ•°æ®ç±»åž‹ï¼Œå€¼æœ¬èº«æ˜¯ä¸å¯å˜çš„ã€‚ä¾‹å¦‚ï¼šå¯¹å­—ç¬¦ä¸²è¿›è¡Œæ“ä½œï¼Œè¿”å›žäº†ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè€ŒåŽŸå§‹å­—ç¬¦ä¸²æœ¬èº«å¹¶æ²¡æœ‰è¢«æ”¹å˜ã€‚ æ‰€ä»¥é™¤ Object ç±»åž‹å˜é‡å¤–ï¼Œè¦æ”¹å˜å˜é‡çš„å€¼ï¼Œéœ€è¦é‡æ–°èµ‹å€¼ã€‚12345var str = 'hello';str + ' world'; // è¡¨è¾¾å¼è¿”å›ž 'hello world'console.log(str); // è¾“å‡º 'hello', str æœ¬èº«çš„å€¼æ²¡æœ‰è¢«æ”¹å˜str += ' world'; // è¡¨è¾¾å¼è¿”å›ž 'hello world'console.log(str); // è¾“å‡º 'hello world', str è¢«é‡æ–°èµ‹å€¼ BooleanBoolean è¡¨ç¤ºä¸€ä¸ªé€»è¾‘å®žä½“ï¼Œæœ‰ä¸¤ä¸ªå€¼ï¼štrue, falseã€‚ æ‰€æœ‰çš„å€¼éƒ½å¯ä»¥è§£é‡Šæˆå¸ƒå°”å€¼ï¼Œé™¤äº†ä¸€äº›ç‰¹å®šå€¼è¢«è§£é‡Šæˆ falseï¼Œå…¶ä»–å€¼éƒ½å°†è§£é‡Šæˆ trueã€‚ false : false, undefined, null, 0, â€˜â€™(ç©ºå­—ç¬¦ä¸²), NaNæ³¨æ„ï¼šè¿™äº›å€¼è™½ç„¶å¯ä»¥è§£é‡Šæˆ falseï¼Œä½†å¹¶ä¸è¡¨ç¤ºå°±ä¸Ž false ç­‰ä»·ï¼š12345678910undefined == false; // falseundefined === false; // falsenull == false; // falsenull === false; // false0 == false; // true0 === false; // false'' == false; // true'' === false; // falseNaN == false; // falseNaN === false; // false Nullnull æ˜¯ javascript çš„ä¸€ä¸ªå­—é¢é‡ï¼Œè¡¨ç¤ºç©ºã€‚ null å¸¸ç”¨åšè¡¨ç¤ºæœŸæœ›å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•å¼•ç”¨ã€‚ Undefinedé€šå¸¸æ‰€è¯´çš„ undefined æ˜¯æŒ‡å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå±žæ€§ window.undefinedã€‚ æœªåˆå§‹åŒ–çš„å˜é‡éƒ½æœ‰ä¸€ä¸ªé»˜è®¤å€¼ undefinedï¼Œæœªè¢«ä¼ å…¥å®žå‚çš„å½¢å‚å€¼ä¸º undefinedï¼Œæœªæ·»åŠ  return è¿”å›žå€¼çš„å‡½æ•°ï¼Œé»˜è®¤è¿”å›ž undefinedã€‚123456var x; // undefinedfunction x1(a)&#123; console.log(a); // without return&#125;x1(); // return undefined, and console print a as undefined. null ä¸Ž undefined æ¯”è¾ƒ1234typeof null; // object, ç©ºå¼•ç”¨å¯¹è±¡ï¼Œæœ‰äº›äººè§‰å¾—è¿™åº”è¯¥ç®—æ˜¯ä¸€ä¸ª bugtypeof undefined; // undefinednull == undefined; // truenull === undefined; // false åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯ undefinedï¼š12345var x;x === undefined &amp;&amp; 1 || 0; // 1typeof x === 'undefined' &amp;&amp; 1 || 0; // 1typeof y === 'undefined' &amp;&amp; 1 || 0; // 1y === undefined &amp;&amp;1 || 0; // ReferenceError, y æœªè¢«å£°æ˜Žè¿‡ Numberæ•°å€¼ç±»åž‹çš„å–å€¼èŒƒå›´ -(2^53 -1) åˆ° 2^53 -1 (SAFE_INTEGER_VALUE)ã€‚javascript æ•°å€¼ç±»åž‹æ²¡æœ‰ç±»ä¼¼ java åˆ†ä¸ºæ•´åž‹ï¼Œé•¿æ•´åž‹ï¼Œæµ®ç‚¹åž‹ï¼ŒåŒç²¾åº¦æµ®ç‚¹åž‹ã€‚ javascript ä¸­æ‰€æœ‰æ•°å€¼éƒ½æ˜¯ Number ç±»åž‹ã€‚é™¤äº†æ•°å€¼å¤–ï¼ŒNumberè¿˜åŒ…æ‹¬ä¸€äº›å¸¦ç¬¦å·çš„å€¼ï¼š+/-Infinity, NaN(Not-a-Number)ã€‚ *æ³¨æ„ï¼š0 === -0 ä¸ºçœŸï¼Œ ä½†åœ¨è®¡ç®—æ—¶ï¼š121/0; // Infinity1/-0; // -Infinity Stringå­—ç¬¦ä¸²ç±»åž‹ç”¨äºŽè¡¨ç¤ºæ–‡æœ¬æ•°æ®ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¦ç´¢å¼•çš„å…ƒç´ é›†åˆï¼Œå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå…ƒç´ éƒ½å æ®ä¸€ä¸ªä½ç½®ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯ 0ï¼Œå¾€åŽé€’å¢žã€‚ å­—ç¬¦ä¸²ä¸€æ—¦è¢«åˆ›å»ºï¼Œå°±ä¸ä¼šè¢«æ›´æ”¹ï¼Œå­—ç¬¦ä¸²æ“ä½œä¼šè¿”å›žä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œä½†ä¸ä¼šæ”¹å˜åŽŸå§‹å­—ç¬¦ä¸²ã€‚ è¡¨è¾¾æ–‡æœ¬æ•°æ®å’Œç¬¦å·æ•°æ®æ—¶å€™æŽ¨èä½¿ç”¨å­—ç¬¦ä¸²ã€‚å½“è¡¨è¾¾å¤æ‚çš„æ•°æ®æ—¶ï¼Œä½¿ç”¨å­—ç¬¦ä¸²è§£æžå’Œé€‚å½“çš„ç¼©å†™ã€‚ *æ³¨æ„ï¼šå¯¹äºŽæ•°å€¼å­—ç¬¦ä¸²å’Œæ•°å€¼åž‹æ•°æ®ï¼š12'1' == 1; // true'1' === 1; // false æ‰€ä»¥åœ¨å¯¹ä¸€äº›æ•°æ®åˆ¤æ–­æ—¶ï¼Œæ— æ³•ä¿è¯ä¼ å…¥çš„æ˜¯æ•°å€¼åž‹å­—ç¬¦ä¸²æˆ–æ•°å€¼åž‹æ•°æ®ï¼Œæ ¹æ®ä½¿ç”¨åœºæ™¯åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰æ“ä½œç¬¦ã€‚]]></content>
      <tags>
        <tag>javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨redisè®¢é˜…å®žçŽ°å®šæ—¶ä»»åŠ¡(node.js)]]></title>
    <url>%2F2016%2F11%2F29%2F%E4%BD%BF%E7%94%A8redis%E8%AE%A2%E9%98%85%E5%AE%9E%E7%8E%B0%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1-node-js%2F</url>
    <content type="text"><![CDATA[æ¡ä»¶å®‰è£…çš„redisç‰ˆæœ¬è‡³å°‘ä¸º2.8.0ï¼ŒæŸ¥çœ‹redisç‰ˆæœ¬1234&gt; redis-cli --versionredis-cli 3.2.5&gt; redis-server --versionRedis server v=3.2.5 sha=00000000:0 malloc=libc bits=64 build=112b103d6428f815 åªæœ‰2.8.0ä»¥ä¸Šçš„ç‰ˆæœ¬æ”¯æŒé”®äº‹ä»¶è®¢é˜… å¼€å¯é”®å¤±æ•ˆäº‹ä»¶123456789101112redisäº‹ä»¶ï¼šK Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.E Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.g Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...$ String commandsl List commandss Set commandsh Hash commandsz Sorted set commandsx Expired events (events generated every time a key expires)e Evicted events (events generated when a key is evicted for maxmemory)A Alias for g$lshzxe, so that the &quot;AKE&quot; string means all the events. redisé»˜è®¤æ˜¯å…³é—­é”®äº‹ä»¶è®¢é˜…ï¼Œå¯ä»¥åœ¨bashè¾“å…¥ä»¥ä¸‹å‘½ä»¤å¼€å¯ï¼Œå› ä¸ºæˆ‘ä»¬åªè¦è®¢é˜…é”®å¤±æ•ˆçš„äº‹ä»¶ï¼Œæ‰€ä»¥åªéœ€è¦Exå°±å¤Ÿäº†ï¼š12&gt; redis-cli config set notify-keyspace-events ExOK è®¢é˜…äº‹ä»¶åœ¨ç¬¬ä¸€ä¸ªç»ˆç«¯çª—å£(windowsæ˜¯æŽ§åˆ¶å°cmd)ï¼Œæ‰“å¼€redis-cliï¼Œè¿›è¡Œä»¥ä¸‹æ“ä½œ123456&gt; redis-cli&gt; PSUBSCRIBE __keyevent@1__:expiredReading messages... (press Ctrl-C to quit)1) "psubscribe"2) "__keyevent@1__:expired"3) (integer) 1 __keyeventä»£è¡¨è®¢é˜…çš„æ˜¯é”®äº‹ä»¶ï¼Œ1æ˜¯redisçš„dbï¼Œexpiredè¡¨ç¤ºè®¢é˜…çš„æ˜¯é”®å¤±æ•ˆçš„äº‹ä»¶ å¦‚æžœè¦è®¢é˜…æ‰€æœ‰æ•°æ®åº“çš„é”®ï¼Œå¯ä»¥æ”¹æˆï¼š1&gt; PSUBSCRIBE __keyevent@*__:expired è§¦å‘è®¢é˜…åœ¨æ–°çš„ä¸€ä¸ªç»ˆç«¯æˆ–æŽ§åˆ¶å°ä¸­ï¼Œæ‰“å¼€redis-cliï¼Œåˆ›å»ºä¸€ä¸ªé”®ï¼Œå¹¶è®©å…¶å¤±æ•ˆï¼š1234567&gt; redis-cli&gt; select 1OK&gt; set mykey 'hello'OK&gt; expire mykey 10(integer) 1 10ç§’åŽmykeyè¿‡æœŸä¼šè§¦å‘ç»ˆç«¯1çš„äº‹ä»¶è®¢é˜…ï¼Œç»ˆç«¯1ä¼šè¾“å‡º12341) "pmessage"2) "__keyevent@1__:expired"3) "__keyevent@1__:expired"4) "mykey" æ‰€ä»¥æˆ‘ä»¬åªè¦åˆ¶å®šå¥½é”®çš„è¿‡æœŸæ—¶é—´ï¼ŒåŽ»è§¦å‘é”®è®¢é˜…äº‹ä»¶ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥å®žçŽ°å®šæ—¶ä»»åŠ¡ node.jsä»£ç ç”¨åˆ°ç¬¬ä¸‰æ–¹æ¨¡å—redis(npm install redis)12345678910111213141516'use strict';let redis = require('redis');let child_process = requrie('child_process');const keyClient = redis.createClient(&#123;db: 1&#125;);const pubClient = redis.createClient();child_process.execSync('redis-cli config set notify-keyspace-events Ex'); // ç¡®ä¿é”®äº‹ä»¶è®¢é˜…å¼€å¯pubClient.psubscribe('__keyevent@1__:expired');keyClient.set('mykey', 'hello', ()=&gt;&#123; keyClient.pexpireat('mykey', +new Date('2016/12/23 10:00:00'));&#125;);let futureFun = () =&gt;&#123; console.log('hello world');&#125;;pubClient.on('pmessage', (channel, listen, key)=&gt;&#123; key == 'mykey' &amp;&amp; futureFun();&#125;); futureFunä¼šåœ¨2016/12/23 10ç‚¹ï¼Œmykeyè¿™ä¸ªé”®è¿‡æœŸçš„æ—¶å€™æ‰§è¡Œã€‚]]></content>
      <tags>
        <tag>node.js</tag>
        <tag>javascript</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€Žä¹ˆçœ‹å¾…facebookåŒ…ç®¡ç†å™¨ yarn]]></title>
    <url>%2F2016%2F10%2F26%2F%E6%80%8E%E4%B9%88%E7%9C%8B%E5%BE%85facebook%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8-yarn%2F</url>
    <content type="text"><![CDATA[Yarn æ˜¯ä¸€ä¸ªFacebookæŽ¨å‡ºçš„æ–°çš„åŒ…ç®¡ç†å™¨ï¼Œç”¨äºŽæ›¿ä»£çŽ°æœ‰çš„ npm å®¢æˆ·ç«¯æˆ–è€…å…¶ä»–å…¼å®¹ npm ä»“åº“çš„åŒ…ç®¡ç†å·¥å…·ã€‚Yarn ä¿ç•™äº†çŽ°æœ‰å·¥ä½œæµçš„ç‰¹æ€§ï¼Œä¼˜ç‚¹æ˜¯æ›´å¿«ã€æ›´å®‰å…¨ã€æ›´å¯é ã€‚ å¯¹äºŽnpmï¼Œæœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯æ…¢ï¼Œç‰¹åˆ«æ˜¯å¯¹äºŽå›½å†…çš„å¼€å‘è€…æ¥è¯´ï¼Œå¢™å¤–çš„ä¸–ç•Œæ€»æ˜¯çˆ±ä¸é‡Šæ‰‹åˆé¥ä¸å¯åŠã€‚ä¸€ä¸ªå¤§ç‚¹çš„ä¾èµ–åŒ…å¯èƒ½éœ€è¦è¿‘åŠä¸ªå°æ—¶æ‰èƒ½downä¸‹æ¥ã€‚è¿˜å¥½æˆ‘ä»¬è¿˜æœ‰cnpmï¼Œè¿˜æœ‰taobaoçš„é•œåƒæºã€‚ yarnåˆ°åº•æœ‰å¤šå¿«ï¼Œèƒ½ä¸èƒ½å–ä»£npmå®‰è£…ï¼Œä¸‹é¢é€šè¿‡å®‰è£…å‡ ä¸ªæ¨¡å—æ¥éªŒè¯ä¸€ä¸‹ã€‚ å®‰è£…ç›¸åŒçš„åŒ…expressæ‰€è€—è´¹çš„æ—¶é—´ä¸ºäº†ä¸æµªè´¹æ—¶é—´åšæ— è°“çš„æµ‹è¯•ï¼Œå°±ä¸ç›´æŽ¥æµ‹è¯•npmçš„æºäº†ï¼Œè€Œæ˜¯å°†npmçš„æºæ›´æ¢ä¸ºæˆ‘å·²ç»æ­å¥½çš„å›½å†…é•œåƒæœåŠ¡ã€‚ yarnä½¿ç”¨é»˜è®¤æºï¼Œnpmä½¿ç”¨å›½å†…é•œåƒ1234567891011121314// å› ä¸ºnpmä¸èƒ½ç›´æŽ¥è¾“å‡ºå®‰è£…æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©é€šè¿‡ä»£ç æ£€æµ‹æ•´ä¸ªç¨‹åºçš„ç©¿é€æ—¶é—´æ¥åšæµ‹é‡'use strict';let child_process = require('child_process');function test(m)&#123; console.time(`$&#123;m&#125; finished in :`); child_process.exec(`$&#123;m == 'npm' &amp;&amp; (m + ' install') || (m + ' add')&#125; express`,function()&#123; console.timeEnd(`$&#123;m&#125; finished in :`); &#125;);&#125;test('npm'); // finished in 4331.464mstest('npm'); // finished in 1809.988ms// æ¸…ç©ºæŽ‰å®‰è£…åŽ†å²ï¼Œç»§ç»­æ‰§è¡Œä»¥ä¸‹ä»£ç test('yarn'); // finished in 2810.565mstest('yarn'); // finished in 1106.524ms å°†yarnå®‰è£…æºæ¢æˆä¸Žnpmä¸€æ ·çš„å›½å†…é•œåƒ1234// ä¸ºäº†æµ‹è¯•æ•´ä¸ªé¡¹ç›®çš„å¯ç”¨æ€§ï¼ŒæŒ‘é€‰äº†ä¸€ä¸ªä¾èµ–è¾ƒå¤šçš„é¡¹ç›®æ¥åšå¹²å‡€å®‰è£…æµ‹è¯•yarn install // 43.27snpm install // &gt;100s// è¯¥æµ‹è¯•éƒ½æ˜¯åœ¨ä½¿ç”¨åŒä¸€æºçš„æƒ…å†µä¸‹è¿›è¡Œ å®‰è£…åœ¨æˆ‘ç§æœ‰æºä¸Šçš„ç§æœ‰åŒ…1234567891011121314// åœ¨å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ­å»ºç§æœ‰npmä»£ç†æœåŠ¡çš„ç›®çš„ä¹Ÿæ˜¯ä¸ºäº†ç®¡ç†åªæœ‰è‡ªå·±ä½¿ç”¨çš„ä¸€äº›å†…éƒ¨æ‰©å±•åŒ…ï¼Œå¦‚æžœä¸æ”¯æŒç§æœ‰åŒ…çš„å®‰è£…ï¼Œyarnå°±æ— æ³•å–ä»£ä¼ ç»Ÿçš„npm'use strict';let child_process = require('child_process');function test(m)&#123; console.time(`$&#123;m&#125; finished in :`); child_process.exec(`$&#123;m == 'npm' &amp;&amp; (m + ' install') || (m + ' add')&#125; @ym/rpc`,function()&#123; console.timeEnd(`$&#123;m&#125; finished in :`); &#125;);&#125;test('npm'); // finished in 7547.653mstest('npm'); // finished in 5121.880ms// æ¸…ç©ºæŽ‰å®‰è£…åŽ†å²ï¼Œç»§ç»­æ‰§è¡Œä»¥ä¸‹ä»£ç test('yarn'); // finished in 2752.662mstest('yarn'); // finished in 1140.099ms yarnåœ¨å³ä½¿ä¸ä½¿ç”¨å›½å†…é•œåƒè®¿é—®çš„æ—¶å€™ï¼Œå®‰è£…å…¬æœ‰åŒ…çš„é€Ÿåº¦ä¾ç„¶æ¯”ä½¿ç”¨å›½å†…é•œåƒçš„npmå¿«ï¼Œåœ¨ä½¿ç”¨åŒæ˜¯å›½å†…é•œåƒæºçš„æ—¶å€™ï¼Œä¼˜åŠ¿æ›´æ˜¯æ˜Žæ˜¾ã€‚ æµ‹è¯•å®‰è£…æ•´ä¸ªé¡¹ç›®ä¾èµ–1234// ä¸ºäº†æµ‹è¯•æ•´ä¸ªé¡¹ç›®çš„å¯ç”¨æ€§ï¼ŒæŒ‘é€‰äº†ä¸€ä¸ªä¾èµ–è¾ƒå¤šçš„é¡¹ç›®æ¥åšå¹²å‡€å®‰è£…æµ‹è¯•yarn install // 43.27snpm install // &gt;100s// è¯¥æµ‹è¯•éƒ½æ˜¯åœ¨ä½¿ç”¨åŒä¸€æºçš„æƒ…å†µä¸‹è¿›è¡Œ focusä»¥ä¸Šå®‰è£…æµ‹è¯•æ¯ä¸ªéƒ½è‡³å°‘æµ‹è¯•3æ¬¡ï¼Œæ¯æ¬¡æµ‹è¯•éƒ½éœ€æ¸…ç©ºæŽ‰å®‰è£…ä¿¡æ¯ï¼Œå¹³å‡å®‰è£…æ—¶é—´è¯¯å·®æ³¢åŠ¨ä¸å¤§ ç»¼è¿°yarnç”¨ä½œåŒ…ç®¡ç†å™¨ï¼Œåœ¨é€Ÿåº¦ä¸Šç¡®å®žæœ‰å¾ˆå¤§ä¼˜åŠ¿ï¼Œä¹Ÿæ”¯æŒç§æœ‰npmåŒ…ç®¡ç†å®‰è£…ã€‚ é™¤äº†æœ‰æ—¶å€™ä¼šæœ‰ä¸ç¨³å®šçš„æƒ…å†µå‡ºçŽ°ï¼Œæ•´ä½“ä¸Šè¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œåªè¦ç¨åŠ ä¼˜åŒ–ï¼Œä½œä¸ºnpmçš„æ›¿ä»£å“æ˜¯æ²¡æœ‰é—®é¢˜]]></content>
      <tags>
        <tag>yarn</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[koa-qx-router | XueZier]]></title>
    <url>%2F2016%2F10%2F26%2Fkoa-qx-router-XueZier%2F</url>
    <content type="text"><![CDATA[é…åˆkoa@v2ä½¿ç”¨çš„è·¯ç”±æ³¨å†Œç³»ç»Ÿ,Now , you can use the service !!!! please see the readme.md123456789101112131415161718192021 _oo0oo_ 088888880 88" . "88 (| -_- |) 0\ = /0 ___/'---'\___ .' \\| |// '. / \\||| : |||// \ /_ ||||| -:- |||||- \ | | \\\ - /// | | | \_| ''\---/'' |_/ | \ .-\__ '-' __/-. / ___'. .' /--.--\ '. .'___ ."" '&lt; '.___\_&lt;|&gt;_/___.' &gt;' "". | | : '- \'.;'\ _ /';.'/ - ' : | | \ \ '_. \_ __\ /__ _/ .-' / / ====='-.____'.___ \_____/___.-'____.-'===== '=---='^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Buddha bless : : Never BUGs Installation (via npm)npm install koa-qx-router or npm install koa-qx-router â€“save UsageOn Main Server1234const qx = require("koa-qx-router");const qxServer = new qx.server();qxServer.listen(mainPort, mainHostname, cb); Install AuthInstall auth must be used. add an auth at least. An auth can only be used by one person to cerate client Service to connect the main service.1qxServer.install(&#123;name1:pass1, name2:pass2 ...&#125;); On Client Servercreate a app12const koa = require("koa");const app = new koa(); create a client service object123456789const qx = require("koa-qx-router");const qxClient = new qx.client(&#123; port: mainPort, // ä¸»è·¯ç”±çš„ç«¯å£,default 1333 hostname: mainHostname, // ä¸»è·¯ç”±çš„hostname,default 127.0.0.1 auth:&#123; name: auth_name, // æ³¨å†Œä¸»è·¯ç”±æ—¶çš„auth,ä½œä¸ºéªŒè¯,éœ€è¦åœ¨ä¸»è·¯ç”±ä¸­å…ˆé…ç½®æ­¤é¡¹ pass: auth_pass &#125;&#125;); Origin Cors1app.use(qxClient.cors(options)); OptionsConfigures the Access-Control-Allow-Origin CORS header. Options is a json.1234origin Array, default [*], set `Access-Control-Allow-Origin`credentials Boolean, default false, set `Access-Control-Allow-Credentials`allowMethods String, default &apos;GET,HEAD,PUT,POST,DELETE&apos;, set `Access-Control-Allow-Methods`strict Boolean, false, set `Access-Control-Allow-Origin` cors model Auth1234app.use(qxClient.auth(&#123; name: name, pass: pass&#125;)); if didnt set name and pass, qxClient will auto generate a name and pass. BodyParser1app.use(qxClient.bodyParser(options)) OptionsParse the request body. options is a json1234567encoding String, default `utf-8`multipart Boolean, allow multipart data, default true,jsonLimit String|Integer, The byte (if integer) limit of the JSON body, default 1mbformLimit String|Integer, The byte (if integer) limit of the form body, default 56kbtextLimit String|Integer, The byte (if integer) limit of the text body, default 56kbpatchNode Boolean, Patch request body to Node&apos;s ctx.req, default falsepatchKoa Boolean, Patch request body to Koa&apos;s ctx.request, default true add koa-router123456const router = require("koa-router")();router.all("/getname", function* ()&#123; this.body = "ok";&#125;);app.use(router.routes());app.use(router.allowedMethods()); start client service1app.listen(clientPort, qxClient.registerServer(app)); Now, defined a rest Api for http://127.0.0.1:clientPort/getname, access the api you can use curl like1curl http://mainHostname:mainPort/auth_name/getname Supportuse the module must start least 2 service processes. 1 for Main service, others for client service processes. Main service process is open to the outside world. Client service processes is closed, not open to the outside world. Users only through the main service process to access client service processes.]]></content>
      <tags>
        <tag>node.js</tag>
        <tag>javascript</tag>
        <tag>net</tag>
      </tags>
  </entry>
</search>
